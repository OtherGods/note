没看懂，感觉这篇文章缺少东西

## 背景

随着财经支付业务的快速发展，考虑到未来订单量持续增长，在线存储遇到更大的挑战，需提前做好规划。目前财经支付主要业务都是使用 mysql（InnoDB）作为数据存储，因历史订单信息访问频率低并占用了大量数据库存储空间，期望将历史数据跟生产最新交易数据进行分离，当前数据库保留最近一段时间的数据作为热库，历史交易存入另一个数据库压缩存储作为冷库(rocksdb)，即数据库冷热分离。此举将会极大的节省数据库设备成本，减少因在线存储空间不足扩容导致停服不可用的时长，以下基于财经支付的统一交易系统现状做的相关案例分析仅供大家参考。

## 方案

### 技术选型

### 架构图
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202408132258420.png)

#### **方案分析**

因业务场景比较复杂，如果按照业务场景梳理工作量将几何倍的增长，换种维度，数据库相关的操作无非就是查询、插入、更新，只要能在数据库交互层实现保证查询、插入、更新这些数据库基本操作在增加冷热分离后功能不受影响即可。财经支付代码有统一的分层规范，对数据库操作全部收敛封装至数据库交互层，因此比较好改造，不扩容的情况下，热库预计保留最近 X 天（时间可调）数据， X 天前的数据归档到冷库。
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202408132318338.png)

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202408132319044.png)























转载自：[海量数据冷热分离方案与实践](https://mp.weixin.qq.com/s/ZKRkZP6rLHuTE1wvnqmAPQ)

