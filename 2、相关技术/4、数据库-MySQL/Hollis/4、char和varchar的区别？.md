# 典型回答

char和varchar都是用于在数据库中存储**字符串**的数据类型。它们之间的主要区别在于**存储空间**的使用方式：

## char

1. **char是一种定长的数据类型，它的长度固定且在存储时会自动在结尾添加空格来将字符串填满指定的长度**。char的长度范围是0-255
2. 字段定义使用char(100)，则*插入记录后就分配了100个字符*，**后续修改不会造成<font color="blue" size=5>页分裂</font>的问题**

**char的优点**：定长的字符串类型，减少内存碎片，并且无需额外的磁盘空间去存储长度信息
**char的缺点**：会丢失列末尾的空格信息

例如，存储身份证号（固定长度）、存储订单号（固定长度）、存储国家编码（固定长度），这些都适合用char。

## varchar

1. **varchar是一种可变长度的数据类型，它只会存储实际的字符串内容，不会填充空格**。因此，在存储短字符串时，varchar可以节省空间。varchar的长度范围是0-65535（MySQL 5.0.3之后的版本）
2. 字段定义使用varchar(100)，实际存储可能会少于100，由于没有提前分配存储空间，因为*表中数据刚开始插入时，可变长度字段值都是根据实际长度存储下来的*，且*行与行之间数据也是紧密连续存放在文件地址中的*。那么现在**如果值变长了(不超过表结构中该字段定义的长度就不会报错)，原来的位置无法扩展出新的空间出来，所以无法覆盖存放到原来的位置上。此时MySQL就会使用<font color="blue" size=5>页分裂</font>的方法扩展字段变长的空间**。

**varchar的优点**：*变长的字符串类型，兼容性更好*；
**varchar的缺点**：使用varchar可能会产生*内存碎片*、varchar会*额外需要1到2个字节存储长度信息*、以及update语句可能会导致*页分裂*（对CPU、IO造成负担，进而影响到其它插入删除操作）。

例如，存储产品描述（可变长度）、存储用户地址（可变长度）、存储用户名称（可变长度），这些都适合用varchar。

## 页分裂

[61、什么是InnoDB的页分裂和页合并](2、相关技术/4、数据库-MySQL/Hollis/61、什么是InnoDB的页分裂和页合并.md)

## 内存碎片

[99、MySQL为什么会有存储（内存）碎片？有什么危害？](2、相关技术/4、数据库-MySQL/Hollis/99、MySQL为什么会有存储（内存）碎片？有什么危害？.md)


