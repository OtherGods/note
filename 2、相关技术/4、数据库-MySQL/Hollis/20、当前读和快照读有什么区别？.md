#当前读 #快照读 

<font color="red" size=5><font color="blue" size=5>快照</font>：表中某行记录在undolog日志中版本链中的某个版本</font>

所谓 **==*快照读*，就是读取的是快照数据（也就是 表中某行记录 或 undolog中该行记录的历史数据）==**；<font color="blue" size=5>快照读是MVCC的基础</font>。

**我们常用的普通的SELECT语句在不加锁情况下就是快照读**，如：
```sql
SELECT * FROM xx_table WHERE ...
```

和快照读相对应的另外一个概念叫做当前读，**==*当前读*，就是读取表中某行记录的最新数据==**；<font color="blue" size=5>当前读是悲观锁的基础</font>。

**加锁的 SELECT，或者对数据进行增删改都会进行当前读**，比如：
```sql
SELECT * FROM xx_table LOCK IN SHARE MODE;

SELECT * FROM xx_table FOR UPDATE;

INSERT INTO xx_table ...

DELETE FROM xx_table ...

UPDATE xx_table ...
```

在MySQL 中，<font color="red" size=5>只有READ COMMITTED 和 REPEATABLE READ这两种事务隔离级别才会使用快照读</font>。
- *==在 RC 中==*：每次**读取总是读取行的最新版本**
- *==在 RR 中==*：
	- 每次**读取到的记录是事务中第一次SELECT语句执行时的记录**
	- **只有在本事务中对数据进行更改才会更新快照**



转载自：[https://www.yuque.com/hollis666/io9xi1/gkvz7xyot80ylvnc](https://www.yuque.com/hollis666/io9xi1/gkvz7xyot80ylvnc)




