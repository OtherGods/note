为了统一我们的异常体系，我们定义了两大类异常：

- 系统异常：因为系统原因导致的异常，比如超时等。
- 业务异常：因为业务原因导致的异常，比如用于信息更新异常。
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202412292338775.png)

为了规范异常，我们定义了一套 ErrorCode 体系，异常，必须以 ErrorCode 定义：
```java
package cn.hollis.nft.turbo.base.exception; 

/**  
 * 业务异常  
 */  
public class BizException extends RuntimeException {  
      
    private ErrorCode errorCode;  
      
    public BizException(ErrorCode errorCode) {  
        super(errorCode.getMessage());  
        this.errorCode = errorCode;  
    }  
      
    public BizException(String message, ErrorCode errorCode) {  
        super(message);  
        this.errorCode = errorCode;  
    }  
      
    public BizException(String message, Throwable cause, ErrorCode errorCode) {  
        super(message, cause);  
        this.errorCode = errorCode;  
    }  
      
    public BizException(Throwable cause, ErrorCode errorCode) {  
        super(cause);  
        this.errorCode = errorCode;  
    }  
      
    public BizException(String message, Throwable cause, boolean enableSuppression, boolean writableStackTrace, ErrorCode errorCode) {  
        super(message, cause, enableSuppression, writableStackTrace);  
        this.errorCode = errorCode;  
    }  
      
    public ErrorCode getErrorCode() {  
        return errorCode;  
    }  
      
    public void setErrorCode(ErrorCode errorCode) {  
        this.errorCode = errorCode;  
    }  
}
```

BizException的构造函数需要传入ErrorCode。这个 ErrorCode其实是接口：
```java
package cn.hollis.nft.turbo.base.exception;  
  
/**  
 * 错误码  
 */  
public interface ErrorCode {  
    /**  
     * 错误码  
     */  
    String getCode();  
      
    /**  
     * 错误信息  
     */  
    String getMessage();  
}
```

具体的实现其实是一个个枚举，通过枚举约束所有的错误码，如交易错误码：
```java
package cn.hollis.nft.turbo.trade.exception;  
  
import cn.hollis.nft.turbo.base.exception.ErrorCode;  
  
/**  
 * @author Hollis 
 */
public enum TradeErrorCode implements ErrorCode {  
      
    /**  
     * 订单创建失败  
     */  
    ORDER_CREATE_FAILED("ORDER_CREATE_FAILED", "订单创建失败"),  
    /**  
     * 无支付权限  
     */  
    PAY_PERMISSION_DENIED("PAY_PERMISSION_DENIED", "无支付权限"),  
    /**  
     * 支付创建失败  
     */  
    PAY_CREATE_FAILED("PAY_CREATE_FAILED", "支付创建失败"),  
      
    /**  
     * 商品不可售卖  
     */  
    GOODS_NOT_FOR_SALE("GOODS_NOT_FOR_SALE", "商品不可售卖"),  
      
    /**  
     * 商品不存在  
     */  
    GOODS_NOT_EXIST("GOODS_NOT_EXIST", "商品不存在"),  
      
    /**  
     * 订单不可支付  
     */  
    ORDER_IS_CANNOT_PAY("ORDER_IS_CANNOT_PAY", "订单不可支付"),  
    /**  
     * 订单取消失败  
     */  
    ORDER_CANCEL_FAILED("ORDER_CANCEL_FAILED", "订单取消失败");  
      
    private String code;  
      
    private String message;  
      
    TradeErrorCode(String code, String message) {  
        this.code = code;  
        this.message = message;  
    }  
      
    @Override  
    public String getCode() {  
        return this.code;  
    }  
      
    @Override  
    public String getMessage() {  
        return this.message;  
    }  
}
```





