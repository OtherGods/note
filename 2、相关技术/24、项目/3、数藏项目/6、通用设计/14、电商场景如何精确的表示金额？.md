大家都知道，不能用Float和Double来表示金额，会存在丢失精度的问题。

那么要表示金额，业内有两种做法：

1、单位为分，数据库存bigint，代码中用long

2、单位为元，数据库用decimal，代码中用BigDecimal

这两种实际都可以用，

`BigDecimal` 是 Java 中用于精确计算的类，他的好处就是精确度高，支持灵活的数学计算，能自己控制舍入行为，**所以，BigDecimal的适用场景是需要高精度计算的金融应用，如货币计算、利率计算等。**

`long` 是 Java 的一种基本数据类型，用于表示没有小数部分的整数。他的基本数据类型，所以速度要快一些，但是因为他无法表示小数，所以如果金额中出现比`分`更小的单位，就会丢失精度。**所以，Long的适用场景是适合于不涉及小数计算的大整数运算，如某些计数应用或者金额以整数形式表示。比如我们的额度系统、积分系统等。**

我们的项目中，采是如何表示金额的呢？

**代码中：BigDecimal**

**数据库：decimal(18,6)**

**ES：text**

因为 ES 不支持 deciaml 所以我们只能用字符串来存储，数据库中为了能表示的精度更加精确，采用存储18位且小数点后保留6位的方式，代码中则直接使用 BigDecimal 来表示。

但是需要注意的是，使用了 BigDecimal 之后，值的对比需要用 compareTo 方法，而不是 equals 方法，转成字符串需要使用 toPlainString 方法而不是 toString 方法。并且不要用 double、float 创建 BigDecimal，需要用字符串创建。



