秒杀场景下的库存扣减，其实是一个典型的热点商品的库存扣减问题，主要就是解决数据库热点行更新存在大量的锁竞争，导致操作慢，影响数据库性能的问题。

﻿

那么主要的实现的思路就是借助Redis来在数据库之前先进行一次流量拦截和过滤。

﻿

**在我们的项目中，目前有2套秒杀方案，都是经过实践检验证明行之有效，并且很多公司在用的方案**，*比如携程门票的热点扣减方案*：
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202506251127911.png)

这个方案，和我们项目中用到的基于MQ的方案基本上是一样的，而且我们做的比他的方案还要完整，具体到Redis中我们也记录了明细流水，以及取消订单是我们用了事务消息保证一致性等等。

详见：
[3、基于Redis+MQ+数据库实现高并发扣减](2、相关技术/24、项目/3、数藏项目/8、最佳实践/2、秒杀（热点扣减）/3、基于Redis+MQ+数据库实现高并发扣减.md)

快手直播间秒杀热点扣减方案：
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202506251129792.png)

这套方案，是快手在抗辛巴直播间福利品抢购的热点方案，可以看到他同时用到了我们的MQ方案，以及我们的hint方案（虽然他没明说他用了hint，但是他这里提到的针对MySQL的深度优化，看上去和hint的方案是一样的）

他这个方案中提到的数据一致性对账，我们其实也是要做的，因为在技术方案设计的时候就考虑了这个问题，所以在Redis中我们也记录了流水，方便我们后期阿里进行数据核对。

详见：
[4、基于InventoryHint实现库存的热点扣减](2、相关技术/24、项目/3、数藏项目/8、最佳实践/2、秒杀（热点扣减）/4、基于InventoryHint实现库存的热点扣减.md)

附录：
文中提到的方案相关的完整PPT附在这里了，内部资料，勿外传。

[王平-携程门票：亿级流量挑战下的高可用架构设计与实践](2、相关技术/24、项目/3、数藏项目/5、业务功能/资料/王平-携程门票：亿级流量挑战下的高可用架构设计与实践.pdf)

[亿级粉丝大+V+下的交易高性能架构与成本优化-张钦贤](2、相关技术/24、项目/3、数藏项目/5、业务功能/资料/亿级粉丝大+V+下的交易高性能架构与成本优化-张钦贤.pdf)


