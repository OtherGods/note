
H2 是一个开源的轻量级 Java 内存数据库，适用于开发、测试和嵌入式使用场景。它具有高性能、易用性和丰富的功能特性，支持内存模式和持久化模式。

# 1、引入依赖

```xml
<dependency>  
    <groupId>com.h2database</groupId>  
    <artifactId>h2</artifactId>  
    <version>1.4.200</version>  
    <scope>test</scope>  
</dependency>
```

# 2、新增application-test.yml在测试的 classpach 下

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411072353353.png)

```yml
spring:  
  datasource:  
    url: jdbc:h2:mem:nfturbo  
    username: sa  
    password: password  
    driver-class-name: org.h2.Driver  
    h2-console-setting: INIT=RUNSCRIPT FROM 'classpath:schema.sql'
```

ChatGPT解释配置：

这是一个Spring Boot应用的配置片段，特别是关于数据源（database source）的配置。下面我会逐一解释这个配置中的各个部分：

1. **spring.datasource.url**:
    - `jdbc:h2:mem:nfturbo`
    - 这个配置指定了数据库的URL。这里使用的是H2数据库，一个轻量级的、开源的、嵌入式的（也可以作为服务器模式运行）数据库。`mem:nfturbo`表示这是一个内存数据库，数据库的名字是`nfturbo`。内存数据库意味着所有的数据都存储在内存中，当应用关闭时，数据会丢失。
2. **spring.datasource.username**:
    - `sa`
    - 这是连接数据库时使用的用户名。`sa`通常是H2数据库的默认用户名。
3. **spring.datasource.password**:
    - `password`
    - 这是连接数据库时使用的密码。在这个例子中，密码被设置为“password”，但在实际的生产环境中，你应该使用一个更复杂、更安全的密码。
4. **spring.datasource.driver-class-name**:
    - `org.h2.Driver`
    - 这是JDBC驱动的全类名，用于连接H2数据库。JDBC（Java Database Connectivity）是Java应用与数据库之间进行通信的一种标准方式。
5. **spring.datasource.h2-console-setting**:
    - `INIT=RUNSCRIPT FROM 'classpath:schema.sql'`
    - 这是一个特定于H2数据库的设置，用于H2的控制台（一个Web界面，可以用来查看和管理数据库）。这里，`INIT=RUNSCRIPT FROM 'classpath:schema.sql'`表示在应用启动时，会自动运行位于类路径下的`schema.sql`脚本。这个脚本通常用于初始化数据库，例如创建表、索引等。

总的来说，这个配置定义了一个使用H2内存数据库的数据源，并指定了如何连接这个数据库（通过用户名和密码），以及使用哪个JDBC驱动。此外，它还配置了在应用启动时自动运行一个SQL脚本来初始化数据库。

# 3、schema.sql文件配置：

```sql
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    USER_NAME VARCHAR(255) NOT NULL
);
```

# 4、写单测验证

```java
package cn.hollis.nft.turbo.test;  
  
import cn.hollis.nft.turbo.member.infrastructure.mapper.UserMapper;  
import org.junit.Test;  
import org.springframework.beans.factory.annotation.Autowired;  
  
@ActiveProfiles("test")  
public class MybatisTest extends BaseTest {  
      
    @Autowired  
    private UserMapper userMapper;  
      
    @Test  
    public void testMybatis() {  
        userMapper.findById(1L);  
    }  
}
```


