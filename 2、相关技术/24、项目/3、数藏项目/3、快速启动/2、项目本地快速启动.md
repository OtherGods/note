我们的项目是分布式项目，依赖了很多分布式的中间件，其中包括了Nacos、RockteMQ、XXL-JOB、ElasticSearch、Canal、Sentinel 等等。

想要完整体验所有功能，需要把这些中间件全部都启动起来！

但是想要都部署一套的话，成本还是挺高的，所以大家在学习的时候可以按需部署，因为其实不同的模块依赖的服务都一样，像网关、认证以及用户相关的模块其实并没有依赖 MQ、JOB 以及 ES、Canal 这些。

本文介绍的是本地最简快速启动的方式，即主功能可用，但是并非全链路可用，全链路可用需要把各种中间件都部署起来。

### 一、Clone 代码

克隆仓库的最新代码，并使用 IDEA打开，不建议使用 Eclipse，因为我们的项目中用了 Lombok 和 Mapstruct等，需要安装插件。



我们的代码是基于 JDK 21 + Spring Boot 3的，所以这对你本地的 JDK 的要求是要21及以上的版本，这个就不介绍如何安装了，大家自行百度即可。

代码下载后，使用 IDEA 打开即可看到如下目录：
[3、如何获取代码？](2、相关技术/24、项目/3、数藏项目/0、学前必读/3、如何获取代码？.md)

我们的代码是基于 JDK 21 + Spring Boot 3的，所以这对你本地的 JDK 的要求是要21及以上的版本，这个就不介绍如何安装了，大家自行百度即可。

代码下载后，使用 IDEA 打开即可看到如下目录：
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032344961.png)

目录结构请参考：
[5、目录结构](2、相关技术/24、项目/3、数藏项目/1、项目介绍/5、目录结构.md)

### 二、初始化数据库

MySQL 的安装就不展开介绍了，非常的简单，可以自己在本地上安装，也可以去云厂商订购一个 MySQL 的服务，我们的项目中用到的是阿里云的 RDS 的数据库服务，主要是因为他支持 Inventory Hint。这里不强制，自己搭建也可。

1、创建数据库

在你的MySQL 中创建一个数据库，名字为`nfturbo`

2、初始化表结构

在你下载下来的应用代码中，找到 `DDL_nfturbo.sql` 文件，把里面的 SQL 在你的数据库上执行一下。创建出所有需要的表结构。

3、修改应用中数据库相关配置

然后在datasource 这个组件下，找到和数据源相关的配置文件，
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032350768.png)

修改配置文件中修改数据库连接信息：
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032353567.png)

把这里的 url、username、password 都改成你自己的数据库的，默认情况下，username 是 root，password 是123456。

或者在启动参数中增加参数也可：
```shell
-Dspring.datasource.url=xxxxx -Dspring.datasource.username=xxxxx -Dspring.datasource.password=xxxxx
```

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032354288.png)

或者在启动参数中增加参数也可：
```shell
-Dspring.shardingsphere.datasource.ds.url=xxxxx -Dspring.shardingsphere.datasource.ds.username=xxxxx -Dspring.shardingsphere.datasource.ds.password=xxxxx
```

### 三、初始化Redis

同样需要在你的本地部署一个 Redis 服务，或者是采购一个云上的 Redis 服务，这里也不展开介绍了。

部署好之后，找到应用代码中的 cache 组件，修改其中关于缓存相关的配置
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032355900.png)

这里面的 host、port 以及 password 都改成你自己的，保存即可。
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032355479.png)

### 四、Nacos 安装

我们的项目，至少需要安装一个 Nacos当作配置中心，因为我们的配置文件、gateway的路由，以及 dubbo 的注册中心都是依赖 nacos 的。
[4、Nacos部署](2、相关技术/24、项目/3、数藏项目/2、中间件部署/4、Nacos部署.md)

然后把配置文件中的关于 dubbo 的地址都改了：

### 五、Mock掉第三方服务（可选）

我们的项目中有很多外部的平台依赖，比如链平台、支付平台、短信平台以及实名认证平台等。我们同时提供了一键 mock 的方式，通过开启一键 mock，就可以把这些外部依赖全部都 Mock 掉。

在NfTurboBusinessApplication这个类启动的 JVM 参数中增加：
```
-Dspring.profiles.active=dev
```

如果你不想 mock，想要直接使用这些服务，那么可以他改成prod 或者不指定任何默认就是 prod。

#### 5.1、阉割功能

1、不用ES，只用数据库

把`spring.elasticsearch.enable`设置为false 即可。可以修改配置文件，也可以通过JVM 启动参数配置。

### 六、前端服务启动

前端应用需要安装HBuilderX 这个应用，然后导入前端应用，之后一键启动即可：
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032357303.png)

这里运行到 Chrome 或者运行到内置浏览器都可以。

如果你需要修改服务的地址或者端口号，请修改 index.js 中的 baseUrl：
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411032358967.png)

### 七、后端服务启动

在启动前，请确保前面的配置都正确修改。如何检查配置是否修改完成？
[2.1、如何检查配置是否修改完成](2、相关技术/24、项目/3、数藏项目/3、快速启动/2.1、如何检查配置是否修改完成.md)

我们的项目有很多模块，但是为了方便大家更快速的启动，我们可以通过一个 app 模块把所有后端服务都启动起来。前端项目导入到IDEA 中，只需要启动一下4个类即可：

网关服务：NfTurboGatewaysApplication.java

业务服务：NfTurboBusinessApplication.java

认证服务：NfTurboAuthApplication.java

后台管理服务（不需要的时候可以不用启动）：NfTurboAdminApplication.java

### 八、日志查看及测试

启动后日志可以在`~/nfturbo-business/logs`、`~/nfturbo-gateway/logs`、`~/nfturbo-auth/logs`下查看。

后端服务启动成功后，可以在 nacos 上看到服务的注册：
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411042321436.png)

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202411042330870.png)

这样，就可以通过前端页面访问后端服务了。

### 管理端启动

[4、项目管理后台启动](2、相关技术/24、项目/3、数藏项目/3、快速启动/4、项目管理后台启动.md)

- [2.1、如何检查配置是否修改完成](2、相关技术/24、项目/3、数藏项目/3、快速启动/2.1、如何检查配置是否修改完成.md)
- [2.2、应用部署&启动失败问题列表](2、相关技术/24、项目/3、数藏项目/3、快速启动/2.2、应用部署&启动失败问题列表.md)



