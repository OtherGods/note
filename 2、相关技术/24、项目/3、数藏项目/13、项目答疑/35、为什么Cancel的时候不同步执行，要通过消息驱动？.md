[4、引入TCC实现普通交易环节订单和库存的一致性](2、相关技术/24、项目/3、数藏项目/8、最佳实践/6、数据一致性（分布式事务）/4、引入TCC实现普通交易环节订单和库存的一致性.md)

因为在交易系统中，正向流程肯定还要优先保障的。比如众所周知的双十一期间不可以退款，这就是一种降级方案来保障正向流程，把更多的资源留给正向的交易流程。

在我们的TCC方案中，Cancel的发生是概率比较低的情况，在Cancel的时候主要是把订单废弃掉，把库存回滚回去。

尤其是回滚库存，这个和扣减库存一样，都是要操作数据库的，而数据库的并发更新我们需要尽可能的避免，降低变成热更新的风险。而且这个操作，相对来说没那么重要，完全可以晚一点再处理。

所以，我们就把Cancel的操作放到异步链路上，利用MQ的异步、解耦等能力，可以更好的节约资源，优先保障正向流程。
