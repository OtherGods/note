在 TCC 的方案中，我们在 Cancel 的时候，没有直接同步调用，而是通过 MQ 来做的。

首先Cancel失败的情况，一般只会在系统异常的时候才会发生，比如数据库挂了，应用挂了等等，所以我们可以考虑通过MQ的方式来进行Cancel，这样如果失败了，MQ可以不断重试。

而且Cancel的操作放在异步链路上，就可以更好的保障同步下单链路的稳定性，异步回退稍微晚一点其实影响不大。

所以，我们在代码中是通过 MQ 驱动的 Cancel 流程，但是我们没办法保证 MQ 发送一定成功，如果 MQ 丢了怎么办呢？

其实也好办，我们不是有事务日志么，如果事务日志的的状态长时间处于 TRY 状态，而没有推进到 Cancel，那么他就可能是丢了Cancel 消息，那我们就把他们识别出来，进行单独的处理就行了。

比如起一个定时任务，针对Try 超过10分钟的进行Cancel 操作。

