# 1ã€æŠ€æœ¯æ´¾ç³»ç»Ÿæ¶æ„ã€åŠŸèƒ½æ¨¡å—ä¸€è§ˆ

<font color = "red" size = 5>æ˜¯ä»€ä¹ˆ</font>
è¿™æ˜¯ä¸€ä¸ªåŸºäº Spring Bootã€MyBatis-Plusã€MySQLã€Redisã€ElasticSearchã€MongoDBã€Dockerã€RabbitMQ ç­‰æŠ€æœ¯æ ˆå®ç°çš„ç¤¾åŒºç³»ç»Ÿï¼Œé‡‡ç”¨ä¸»æµçš„äº’è”ç½‘æŠ€æœ¯æ¶æ„ã€å…¨æ–°çš„UIè®¾è®¡ã€æ”¯æŒä¸€é”®æºç éƒ¨ç½²ï¼Œæ‹¥æœ‰å®Œæ•´çš„æ–‡ç« &æ•™ç¨‹å‘å¸ƒ/æœç´¢/è¯„è®º/ç»Ÿè®¡æµç¨‹ç­‰ï¼Œä»£ç å®Œå…¨å¼€æºï¼Œæ²¡æœ‰ä»»ä½•äºŒæ¬¡å°è£…ï¼Œæ˜¯ä¸€ä¸ªéå¸¸é€‚åˆäºŒæ¬¡å¼€å‘/å®æˆ˜çš„ç°ä»£åŒ–ç¤¾åŒºé¡¹ç›®ğŸ‘ ã€‚

é¡¹ç›®åœ°å€ï¼š
1. GitHubï¼šhttps://github.com/itwanger/paicoding
2. Giteeï¼šhttps://gitee.com/itwanger/paicoding


## 1.1ã€ç›¸å…³æ¨¡å—åŠæŠ€æœ¯


![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307161756731.png)

æŠ€æœ¯æ´¾æ¶‰åŠåˆ°çš„ç›¸å…³æŠ€æœ¯å¦‚ä¸‹ï¼š
- æ„å»ºå·¥å…·: åç«¯(Mavenã€Gradle)ã€å‰ç«¯(Webpackã€Vite)
- å•å…ƒæµ‹è¯•: Junit
- å¼€å‘æ¡†æ¶: SpringMVCã€Springã€Spring Boot
- Web æœåŠ¡å™¨: Tomcatã€Caddyã€Nginx
- å¾®æœåŠ¡: Spring Cloud
- æ•°æ®å±‚: JPAã€MyBatisã€MyBatis-Plus
- æ¨¡æ¿å¼•æ“: thymeleaf
- å®¹å™¨: Docker(é•œåƒä»“åº“æœåŠ¡Harborã€å›¾å½¢åŒ–å·¥å…·Portainer)ã€k8sã€Podman
- åˆ†å¸ƒå¼RPCæ¡†æ¶: Dubbo
- æ¶ˆæ¯é˜Ÿåˆ—: Kafka (å›¾å½¢åŒ–å·¥å…·Eagle)ã€RocketMQã€RabbitMQã€Pulsar
- æŒç»­é›†æˆ: Jenkinsã€Drone
- å‹åŠ›æµ‹è¯•: Jmeter
- æ•°æ®åº“: MySQL(æ•°æ®åº“ä¸­é—´ä»¶Gaeaã€åŒæ­¥æ•°æ®canalã€æ•°æ®åº“è¿ç§»å·¥å…·Flyway)
- ç¼“å­˜: Redis (å¢å¼ºæ¨¡å—RedisModã€ORMæ¡†æ¶RedisOM)
- nosql: MongoDB
- å¯¹è±¡å­˜å‚¨æœåŠ¡: minio
- æ—¥å¿—: Log4jã€Logbackã€SF4Jã€Log4j2
- æœç´¢å¼•æ“: ES
- æ—¥å¿—æ”¶é›†: ELK(æ—¥å¿—é‡‡é›†å™¨Filebeat)ã€EFK (Fluentd)ã€LPG(Loki+Promtail+Grafana)
- å¤§æ•°æ®: Sparkã€Hadoopã€HBaseã€Hiveã€Stormã€Flink
- åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒ: Zookeeper
- token ç®¡ç†ï¼šjwtï¼ˆnimbus-jose-jwtï¼‰
- è¯Šæ–­å·¥å…·ï¼šarthas
- å®‰å…¨æ¡†æ¶ï¼šShiroã€SpringSecurity
- æƒé™æ¡†æ¶ï¼šKeycloakã€Sa-Token
- JSON å¤„ç†ï¼šfastjson2ã€Jacksonã€Gson
- office æ–‡æ¡£æ“ä½œï¼šEasyPoiã€EasyExcel
- æ–‡ä»¶é¢„è§ˆï¼škkFileView
- å±æ€§æ˜ å°„ï¼šmapStruct
- Javaç¡¬ä»¶ä¿¡æ¯åº“ï¼šoshi
- Java è¿æ¥ SSH æœåŠ¡å™¨ï¼šganymed
- æ¥å£æ–‡æ¡£ï¼šSwagger-uiã€Knife4jã€Spring Docã€Tornaã€YApi
- ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼šSpring Taskã€Quartzã€PowerJobã€XXL-Job
- GitæœåŠ¡ï¼šGogs
- ä½ä»£ç ï¼šLowCodeEngineã€Yaoã€Eruptã€magic-api
- API ç½‘å…³ï¼šGatewayã€Zuulã€apisix
- æ•°æ®å¯è§†åŒ–ï¼ˆBusiness Intelligenceï¼Œä¹Ÿå°±æ˜¯ BIï¼‰ï¼šDataEaseã€Metabase
- é¡¹ç›®æ–‡æ¡£ï¼šHexoã€VuePress
- åº”ç”¨ç›‘æ§ï¼šSpringBoot Adminã€Grafanaã€SkyWalkingã€Elastic APM
- æ³¨è§£ï¼šlombok
- jdbcè¿æ¥æ± ï¼šDruid
- Java å·¥å…·åŒ…ï¼šhutoolã€Guava
- æ•°æ®æ£€æŸ¥ï¼šhibernate validator
- ä»£ç ç”Ÿæˆå™¨ï¼šMybatis generator
- Web è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šselenium
- HTTPå®¢æˆ·ç«¯å·¥å…·ï¼šRetrofit
- è„šæ‰‹æ¶ï¼šsa-plus


## 1.2ã€åˆæœŸæ•´ä½“è®¾è®¡è‰å›¾
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307161815268.png)


## 1.3ã€ä¸šåŠ¡æ¶æ„å›¾
![](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307162149619.png)


# 2ã€æŠ€æœ¯æ´¾æ¶æ„æ–¹æ¡ˆè®¾è®¡

é€šå¸¸å¯¹äºæŠ€æœ¯äººå‘˜è€Œè¨€ï¼Œåœ¨å¼€å¯ä¸€ä¸ªæ–°çš„é¡¹ç›®ä¹‹å‰ï¼Œåšäº†å‰æœŸçš„è°ƒç ”ã€ç«‹é¡¹ä¹‹åï¼Œç¬¬ä¸€ä»¶äº‹æƒ…å¹¶ä¸æ˜¯å¼€å§‹æ­å»ºå·¥ç¨‹ã€æ’¸ä»£ç ï¼›ä¸€ä¸ªæ•´ä½“çš„æ¶æ„æ–¹æ¡ˆè®¾è®¡ã€è¯„å®¡éƒ½å±äºä¸å¯å¿½è§†çš„ç¯èŠ‚ã€‚

æ¥ä¸‹æ¥æˆ‘å°†å°½é‡è¿½æº¯è¿˜åŸæŠ€æœ¯æ´¾çš„æ•´ä½“æ¶æ„æ˜¯å¦‚ä½•ä»0åˆ°1è¿›è¡Œæ•²å®šçš„

## 2.1ã€ä¸šåŠ¡æ¨¡å—æ‹†è§£
åœ¨æŸ¥çœ‹æœ¬æ–‡ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²æ­£ç¡®äº†è§£æŠ€æœ¯æ´¾çš„ä¸»è¥ä¸šåŠ¡ï¼Œè¦†ç›–çš„åŠŸèƒ½ç‚¹ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œå¯ä»¥å…ˆä½“éªŒä¸€ä¸‹æŠ€æœ¯æ´¾ç½‘ç«™(https://paicoding.com) ä¹Ÿå¯ä»¥æŸ¥çœ‹å‰é¢å‡ ç¯‡çš„è°ƒç ”ã€è®¾è®¡ç¯‡


åœ¨ä¸šåŠ¡æ¨¡å—æ‹†è§£è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ä¸šåŠ¡å±æ€§ç»´åº¦ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„å±æ€§æ˜¯å‚ä¸è€…è§’è‰²

### 2.1.1ã€è§’è‰²æ‹†è§£

ä½œä¸ºä¸€ä¸ªç¤¾åŒºç³»ç»Ÿï¼Œè§’è‰²éå¸¸å®¹æ˜“åˆ’åˆ†
1. è¯»è€…ï¼šæ™®é€šæµè§ˆæ–‡ç« çš„ç”¨æˆ·
2. ä½œè€…ï¼šå‘å¸ƒæ–‡ç« çš„ç”¨æˆ·
3. ç®¡ç†å‘˜ï¼šæ•´ä¸ªç³»ç»Ÿçš„è¶…ç®¡

**æƒé™åˆ’åˆ†**

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307162339560.png)
1. è¯»è€…çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½œè€…éƒ½æ‹¥æœ‰ï¼›ä½†æ˜¯ä½œè€…å­˜åœ¨éƒ¨åˆ†è¯»è€…ç”¨ä¸äº†çš„åŠŸèƒ½ï¼ˆå¦‚æ–‡ç« ç¼–è¾‘ã€ä¿®æ”¹ã€å‘å¸ƒç­‰ï¼‰
2. ç®¡ç†å‘˜æƒé™æœ€å¤§ï¼Œè¦†ç›–è¯»è€…ã€ä½œè€…çš„æ‰€æœ‰åŠŸèƒ½ç‚¹

**å·®å¼‚æ€§åˆ’åˆ†**

æ¥ä¸‹æ¥å°±éœ€è¦æŠ“é‡ç‚¹ï¼Œçœ‹ä¸€ä¸‹ä¸Šé¢ä¸‰ä¸ªè§’è‰²çš„ä¸»è¦å·®å¼‚ç‚¹åœ¨å“ªé‡Œ

â—è¯»è€…ï¼šä¸»è¦æ˜¯é˜…è¯»æ–‡ç« 
â—ä½œè€…ï¼šå‘å¸ƒæ–‡ç« ï¼Œä½œä¸ºä¿¡æ¯è¾“å‡º
â—ç®¡ç†å‘˜ï¼šæ•´ä¸ªç³»ç»Ÿçš„è¿è¥ç®¡ç†ï¼Œå¦‚æ ‡ç­¾ã€åˆ†ç±»ç®¡ç†ï¼Œæ–‡ç« å®¡æ ¸ç­‰ï¼›é€šå¸¸ä¸æ€ä¹ˆå‚ä¸æ–‡ç« çš„é˜…è¯»å‘å¸ƒ

åŸºäºä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å°†æŠ€æœ¯æ´¾çš„ç”¨æˆ·åˆ†ä¸º

â—æ™®é€šç”¨æˆ·ï¼šä½œä¸ºç¤¾åŒºçš„æ³¨å†Œç”¨æˆ·ï¼Œå›´ç»•æ–‡ç« ä¸»ä½“å±•å¼€å…¶è¦†ç›–çš„ä¸šåŠ¡åŠŸèƒ½ç‚¹
â—ç®¡ç†å‘˜ï¼šä½œä¸ºå®˜æ–¹è§’è‰²ï¼Œä¸»è¦è´Ÿè´£æ•´ä¸ªç¤¾åŒºçš„ç”Ÿæ€è¿è¥


### 2.1.2ã€ä¸šåŠ¡æ‹†è§£

æ•´ä¸ªç¤¾åŒºç³»ç»Ÿï¼ŒæŒ‰æ‰¾ä¸šåŠ¡è¾¹ç•Œå…ˆè¿›è¡Œä¸€ç‰ˆæœ¬åˆå§‹åˆ’åˆ†ï¼š

â—ç”¨æˆ·
â—æ–‡ç« 
â—è¯„è®º
â—ä¸“æ 
â—æ¶ˆæ¯é€šçŸ¥

ç„¶åå†é’ˆå¯¹ä¸Šé¢çš„è¿›è¡Œç®€å•çš„ç»†åŒ–æ‹†åˆ†
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307162345124.png)

å†ä¸Šé¢è¿›è¡Œç®€å•æ‹†åˆ†ä¹‹åï¼Œä¼šå‘ç°å‡ ä¸ªå…³é”®ç‚¹

â—ä¸“æ ï¼šå®é™…ä¸Šæ˜¯ä¸€äº›æ–‡ç« çš„åˆé›†ï¼Œå› æ­¤ä¸“æ çš„å¾ˆå¤šåŠŸèƒ½ç‚¹å¯ä»¥ç›´æ¥å»ºç«‹åœ¨æ–‡ç« çš„åŸºç¡€ä¸Š 
â—è¯„è®ºï¼šè¯„è®ºå®é™…ä¸Šä¹Ÿæ˜¯ä¾æ‰˜äºæ–‡ç« çš„ç‚¹è¯„ï¼Œå› æ­¤å®ƒäºæ–‡ç« çš„å…³è”æ€§å¾ˆå¼º 
â—æ¶ˆæ¯é€šçŸ¥ï¼š
	â—‹æ¶ˆæ¯é€šçŸ¥çš„è§¦å‘ç‚¹éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤ï¼Œä½†æ˜¯å®ƒæœ¬èº«åˆå±äºä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ä¸šåŠ¡æ¿å—ï¼Œå› æ­¤é‡ç‚¹å…³æ³¨äº¤äº’æ–¹å¼
	â—‹ä»€ä¹ˆæ ·çš„éœ€è¦é€šçŸ¥ï¼Ÿå¦‚ä½•è§¦å‘é€šçŸ¥ï¼Ÿ
	â—‹æ€ä¹ˆé€šçŸ¥ç»™ç”¨æˆ·ï¼Ÿ
â—ç‚¹èµã€æ”¶è—ã€è®¡æ•°ç»Ÿè®¡ 
	â—‹è¿™ç§ä¸ä¸šåŠ¡ç›¸å…³ï¼Œä½†æ˜¯åˆå¯ä»¥æŠ½ç¦»äºä¸šåŠ¡ä¹‹å¤–ç‹¬ç«‹å­˜åœ¨ï¼Œå¯ä»¥è€ƒè™‘å»ºè®¾é€šç”¨çš„æœåŠ¡èƒ½åŠ›

ç‹¬ç«‹äºæ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ä¹‹å¤–çš„èƒ½åŠ›ï¼š 
â—ç¤¾åŒºçš„æœç´¢ã€æ¨èï¼Œè™½ç„¶ä¸å½±å“æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ï¼Œä½†æ˜¯å¦éœ€è¦è€ƒè™‘ï¼Ÿ 
â—ç¤¾åŒºè¿è¥

åŸºäºä»¥ä¸Šï¼Œæˆ‘ä»¬è¿›è¡Œä¸šåŠ¡æ¨¡å—æ‹†åˆ†ï¼Œå…ˆç¡®å®šä»¥ä¸‹æ¿å—

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307162349096.png)


### 2.1.3ã€å°ç»“
é€šå¸¸ï¼Œåœ¨ä¸šåŠ¡æ‹†è§£è¿™é‡Œï¼Œå¸Œæœ›è¾¾åˆ°çš„ç›®çš„æ˜¯è®©å‚ä¸è€…ï¼Œèƒ½çŸ¥æ™“è¿™ä¸ªé¡¹ç›®çš„æ•´ä½“æƒ…å†µï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå¤šå°‘ä¸šåŠ¡åŸŸï¼Œæ˜ç¡®ä¸šåŠ¡æ¨¡å—çš„ä¸»è¥èŒƒç•´ï¼Œç¡®å®šå½¼æ­¤çš„è¾¹ç•Œã€‚

åœ¨è¿™ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå¯¹æŠ€æœ¯æ´¾çš„æ•´ä½“æ‹†åˆ†ï¼Œå¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š

è§’è‰²
â—æ™®é€šç”¨æˆ·ï¼šä½œä¸ºç¤¾åŒºçš„æ³¨å†Œç”¨æˆ·ï¼Œå›´ç»•æ–‡ç« ä¸»ä½“å±•å¼€å…¶è¦†ç›–çš„ä¸šåŠ¡åŠŸèƒ½ç‚¹
â—ç®¡ç†å‘˜ï¼šä½œä¸ºå®˜æ–¹è§’è‰²ï¼Œä¸»è¦è´Ÿè´£æ•´ä¸ªç¤¾åŒºçš„ç”Ÿæ€è¿è¥

ä¸šåŠ¡æ¨¡å—
â—ä¸šåŠ¡ï¼š 
	â—‹æ–‡ç« 
	â—‹è¯„è®º
	â—‹ä¸“æ 
	â—‹ç”¨æˆ·
	â—‹è¿è¥
â—åŸºç¡€åŠŸèƒ½ï¼š 
	â—‹æ¨è
	â—‹æœç´¢
	â—‹ç»Ÿè®¡
	â—‹æ¶ˆæ¯é€šçŸ¥

æ³¨æ„
â—ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨æ•´ä½“è®¾è®¡é˜¶æ®µï¼Œæ¯ä¸ªä¸šåŠ¡æ¨¡å—ï¼Œéœ€æ˜ç¡®çš„æ˜¯ä¸»ä½“ä¸šåŠ¡åŠŸèƒ½ï¼Œä½†å¹¶ä¸éœ€è¦æ‹†è§£åˆ°ä¸€ä¸ªä¸€ä¸ªå…·ä½“çš„åŠŸèƒ½ç‚¹ï¼Œå…·ä½“çš„åŠŸèƒ½ç‚¹ï¼Œæ”¾åœ¨è¯¦ç»†è®¾è®¡ä¸­æ¥ä½“ç°
â—ä¸šåŠ¡çš„æ‹†è§£ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œç›¸åå®é™…æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ‹†è§£ç»å¸¸ä¼šå‡ºç°åå¤ã€å˜åŠ¨çš„æƒ…å†µï¼ˆå¦‚æœæœ‰ç•™å¿ƒå…¬å¸çš„ç»„ç»‡ç»“æ„è°ƒæ•´çš„å°ä¼™ä¼´ï¼Œåº”è¯¥å¯¹è¿™ç§æƒ…å†µä¸éš¾ç†è§£ï¼‰


## 2.2ã€æ¨¡å—äº¤äº’æ–¹æ¡ˆ

æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦å°†ä¸Šé¢æ‹†åˆ†çš„è§’å„¿å’Œä¸šåŠ¡æ¨¡å—ä¸²è”èµ·æ¥ï¼Œçœ‹ä¸€ä¸‹æˆ‘ä»¬çš„æ•´ä¸ªç³»ç»Ÿæ˜¯æ€ä¹ˆç©çš„ã€‚

### 2.2.1ã€æ•´ä½“äº¤äº’

å¯¹äºæŠ€æœ¯æ´¾çš„æ ¸å¿ƒç©æ³•ï¼Œåœ¨äºä½œè€…å‘å¸ƒæ–‡ç« ï¼Œè¯»è€…é˜…è¯»æ–‡ç« ï¼›æ•´ä½“äº¤äº’ç›¸å¯¹æ¸…æ™°ç®€å•ï¼Œå®é™…ä¸Šè¿™ä¸€å—æ˜¯å¯ä»¥çœç•¥çš„ï¼›å½“ç„¶æˆ‘è¿™é‡Œä¹Ÿè¡¥ä¸Šè¿™ä¸ªæµç¨‹ï¼Œä¸»è¦ä»¥æ–‡ç« å‘å¸ƒï¼Œåˆ°è¯»è€…é˜…è¯»æ–‡ç« ï¼Œå¹¶ç‚¹èµï¼Œä½œè€…è·å–é€šçŸ¥è¿™ä¸ªæµç¨‹ï¼Œæ¥ä¸²ä¸€ä¸‹è¿™ä¸ªç³»ç»Ÿçš„æ•´ä½“äº¤äº’æµç¨‹ã€‚

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170000741.png)

ä¸Šé¢è¿™ä¸ªäº¤äº’è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·ä¸­å¿ƒã€æ–‡ç« ã€æ¶ˆæ¯ä¸­å¿ƒï¼Œå¯ä»¥æ˜¯ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿›ç¨‹å†…çš„æœåŠ¡ï¼›ä½†æ˜¯ä»é€»è¾‘ä¸Šï¼Œä»–ä»¬å½¼æ­¤æ˜¯ç‹¬ç«‹çš„ï¼›é’ˆå¯¹ä¸Šé¢çš„æ“ä½œæµç¨‹ï¼Œå¯ä»¥æç‚¼ä¸‹é¢å‡ ä¸ªç‚¹
1. ç”¨æˆ·é¦–å…ˆé€šè¿‡ç”¨æˆ·ä¸­å¿ƒç™»å½•ç³»ç»Ÿ 
	1. å…·ä½“çš„ç™»å½•æ–¹å¼å¯ä»¥æ˜¯ä¼ ç»Ÿçš„ç”¨æˆ·å/å¯†ç ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰‹æœºå·éªŒè¯ç ï¼Œäº¦æˆ–è€…æ˜¯ç¬¬ä¸‰æ–¹OAuth2.0ç™»å½•
	2. ç™»å½•ä¹‹åï¼Œç”¨æˆ·èº«ä»½è¯†åˆ«ï¼Œå¯ä»¥æ˜¯å•æœºçš„cookie/session, ä¹Ÿå¯ä»¥æ˜¯åˆ†å¸ƒå¼ä¼šè¯ï¼Œjwtç­‰å½¢å¼
2. æ–‡ç« å‘å¸ƒ
	1. æ­£å‘é€»è¾‘ä¸ºä½œè€…å‘å¸ƒæ–‡ç« 
	2. æ–‡ç« å®¡æ ¸å¯¹äºä½œè€…è€Œè¨€ï¼Œåˆ™å±äºè¢«åŠ¨æ¥æ”¶ï¼Œå³å­˜åœ¨ä¸€ä¸ªä¾èµ–å…³ç³»ï¼Œæ˜¯è‡ªåŠ¨å®¡æ ¸ï¼Œè¿˜æ˜¯äººå·¥å®¡æ ¸ï¼Ÿ äººå·¥å®¡æ ¸æ€ä¹ˆé€šçŸ¥ç®¡ç†å‘˜æ¥å®¡æ ¸ï¼Ÿ
3. æ¶ˆæ¯é€šçŸ¥
	1. è¯»è€…ç»™æ–‡ç« ç‚¹èµä¹‹åï¼Œå¦‚ä½•å°†ç‚¹èµé€šçŸ¥ç»™ä½œè€…ï¼Ÿ
	2. è¿™ä¸ªç‚¹èµäº‹ä»¶æ˜¯åŒæ­¥è§¦å‘ç»™ä½œè€…ï¼Œè¿˜æ˜¯å¼‚æ­¥ï¼Ÿ

### 2.2.2ã€ç™»å½•äº¤äº’

ç™»å½•äº¤äº’æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©çš„æ–¹æ¡ˆæ˜¯åŸºäºå¾®ä¿¡å…¬ä¼—å·æ¥å®ç°çš„ï¼Œä¸‹é¢è¿™ä¸ªäº¤äº’æ–¹æ¡ˆé€‚ç”¨äºä¸ªäººå…¬ä¼—å·ï¼ˆå¦‚æœæ˜¯ä¼ä¸šå…¬ä¼—å·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¾®ä¿¡çš„ç›¸å…³çš„APIï¼‰

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170005458.png)


### 2.2.3ã€æ¶ˆæ¯é€šçŸ¥

æ¶ˆæ¯é€šçŸ¥é‡‡ç”¨å¼‚æ­¥é©±åŠ¨ï¼Œé€šè¿‡Event/Listeneræ–¹å¼æ¥å®ç°è§£è€¦

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170005503.png)


## 2.3ã€æ•´ä½“æ¶æ„æ–¹æ¡ˆ

ä¸Šé¢çš„æµç¨‹èµ°å®Œä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ•²å®šæ•´ä½“çš„æ¶æ„æ–¹æ¡ˆï¼Œé€šå¸¸ä¸€ä¸ªå¥½çš„æ¶æ„æ–¹æ¡ˆä¸€å¼ å›¾å°±å®Œäº‹äº†ï¼Œæ³¨æ„è¶Šæ˜¯å‰æœŸåœ¨æ„çš„è¶Šä¸æ˜¯ç»†èŠ‚

### 2.3.1ã€åˆç‰ˆè®¾è®¡

ä¸‹é¢è¿™å¼ å›¾æ¥è‡ªäºæŠ€æœ¯æ´¾å¼€å§‹åšä¹‹å‰ç»˜åˆ¶çš„ï¼Œä¸æœ€ç»ˆçš„å®ç°ç‰ˆç¨æœ‰å·®å¼‚ï¼Œæ— éœ€åœ¨æ„ç»†èŠ‚ğŸ¤­

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170006259.png)

æœ€åˆç‰ˆçš„æ–¹æ¡ˆè®¾è®¡éå¸¸ç®€é™‹ï¼Œå½“ç„¶æ€è·¯è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„

ä»ä¸Šé¢è¿™ä¸ªå›¾ï¼Œæ˜¯å¦èƒ½æŠ“ä½æ•´ä¸ªæŠ€æœ¯æ´¾çš„ä¸šåŠ¡æ¨¡å—ï¼Ÿæ˜¯å¦èƒ½ç¡®å®šä¸šåŠ¡æ¨¡å—çš„å®šä½ï¼ˆå“ªäº›åä¸šåŠ¡å±æ€§ï¼Œå“ªäº›åæŠ€æœ¯å±æ€§ï¼‰ï¼Ÿ æ˜¯å¦èƒ½ç¡®å®šä¸åŒè§’è‰²çš„ä¾§é‡ç‚¹ï¼Ÿ

### 2.3.2ã€ä¸šåŠ¡æ¶æ„

æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹æŠ€æœ¯æ´¾æœ€ç»ˆå®šç¨¿çš„æ•´ä½“ä¸šåŠ¡æ¶æ„å›¾ï¼Œå¦‚ä¸‹ï¼š

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170007268.png)

å†çœ‹ä¸€ä¸‹å‰åå°çš„ä¸šåŠ¡æ‹†åˆ†

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307201055837.png)
1. å‰å°å¯¹åº”æºç ï¼š[https://github.com/itwanger/paicoding](https://github.com/itwanger/paicoding)
   ç”¨Javaå†™çš„ï¼Œåœ¨æœ¬åœ°è¿è¡Œèµ·æ¥åå¥½åƒæ²¡æœ‰è·³è½¬åˆ°åå°çš„æ¥å£
	1. é¡¹ç›®æ¼”ç¤ºåœ°å€ï¼š[https://paicoding.com](https://paicoding.com)
2. åå°å¯¹åº”æºç ï¼š[https://github.com/itwanger/paicoding-admin](https://github.com/itwanger/paicoding-admin)
   éJavaå†™çš„
	1. é¡¹ç›®æ¼”ç¤ºåœ°å€ï¼š[https://paicoding.com/admin-view](https://paicoding.com/admin/)

æœ€åå†çœ‹ä¸€ä¸‹æŠ€æœ¯æ´¾çš„æ¶æ„å›¾

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170008466.png)


## 2.4ã€å°ç»“

æ³¨æ„è¿™ä¸€ç¯‡ä¸ç®—æ˜¯æ­£è§„çš„æŠ€æœ¯æ¶æ„æ–¹æ¡ˆè¯´æ˜ä¹¦ï¼Œæ›´å¤šçš„æ˜¯å°†æ•´ä¸ªæ–¹æ¡ˆçš„è½åœ°è¿‡ç¨‹ç»™å¤§å®¶åˆ¨æäº†ä¸€éï¼Œç®—æ˜¯æŠ›ç –å¼•ç‰ï¼Œå¸Œæœ›å¯ä»¥ç»™å¤§å®¶ä»Šåå†™æ¶æ„æ–¹æ¡ˆæä¾›ä¸€ç‚¹å¸®åŠ©

å…ˆæ€»ç»“çš„æ–¹æ¡ˆè®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170009231.png)


# 3ã€æŠ€æœ¯æ–¹æ¡ˆè¯¦ç»†è®¾è®¡

## 3.1ã€æ•´ä½“ä»‹ç»

### 3.1.1ã€èƒŒæ™¯
è¨€å½’æ­£ä¼ ï¼Œæˆ‘ä»¬ä¸»è¦çš„ç›®çš„æ˜¯å¸Œæœ›æ‰“é€ ä¸€ä¸ªåˆ‡å®å¯ç”¨çš„é¡¹ç›®ï¼Œä¾æ‰˜äºè¿™ä¸ªé¡¹ç›®ï¼Œå°†javaä»ä¸šè€…æ‰€ç”¨åˆ°çš„æŠ€æœ¯æ ˆçœŸå®çš„å±•ç°å‡ºæ¥ï¼Œå¯¹äºç»éªŒä¸æ˜¯é‚£ä¹ˆè¶³çš„å°ä¼™ä¼´ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªçœŸå®çš„ç³»ç»Ÿä¸Šï¼Œç†è§£åˆ°è‡ªå·±å­¦ä¹ çš„çŸ¥è¯†ç‚¹æ˜¯å¦‚ä½•è½åœ°çš„ï¼ŒåŒæ—¶ä¹Ÿèƒ½çœŸå®çš„äº†è§£ä¸€ä¸ªé¡¹ç›®æ˜¯ä»0åˆ°1å®ç°çš„å…¨è¿‡ç¨‹ã€

### 3.1.2ã€ç³»ç»Ÿæ¨¡å—ä»‹ç»

#### 3.1.2.1ã€ç³»ç»Ÿæ¶æ„
åŸºäºç¤¾åŒºç³»ç»Ÿçš„åˆ†å±‚ç‰¹ç‚¹ï¼Œå°†æ•´ä¸ªç³»ç»Ÿæ¶æ„åˆ’åˆ†ä¸ºå±•ç¤ºå±‚ï¼Œåº”ç”¨å±‚ï¼ŒæœåŠ¡å±‚ï¼Œå¦‚ä¸‹å›¾
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170856437.png)


#### 3.1.2.2ã€å±•ç¤ºå±‚
å…¶ä¸­å±•ç¤ºå±‚ä¸»è¦ä¸ºç”¨æˆ·ç›´æ¥æ¥è§¦çš„è§†å›¾å±‚ï¼ŒåŸºäºç”¨æˆ·è§’è‰²ï¼Œåˆ†åˆ«æä¾›ä¸ºé¢å‘æ™®é€šç”¨æˆ·çš„å‰å°ä¸é¢å‘ç®¡ç†å‘˜çš„åå°

å‰å°webå±‚ï¼š
1. é‡‡ç”¨Thymleafæ¨¡æ¿å¼•æ“è¿›è¡Œè§†å›¾æ¸²æŸ“
2. å¯¹äºä¸å…³å¿ƒå‰ç«¯æŠ€æœ¯æ ˆçš„å°ä¼™ä¼´ç›¸å¯¹å‹å¥½ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œåªç”¨ä¼šåŸºæœ¬çš„html,css,jså³å¯
ç®¡ç†å±‚ï¼š
1. é‡‡ç”¨Thymleafæ¨¡æ¿å¼•æ“è¿›è¡Œè§†å›¾æ¸²æŸ“
2. å¯¹äºä¸å…³å¿ƒå‰ç«¯æŠ€æœ¯æ ˆçš„å°ä¼™ä¼´ç›¸å¯¹å‹å¥½ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œåªç”¨ä¼šåŸºæœ¬çš„html,css,jså³å¯

#### 3.1.2.3ã€åº”ç”¨å±‚
åº”ç”¨å±‚ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºä¸šåŠ¡å±‚ï¼Œå¼ºä¸šåŠ¡ç›¸å…³ï¼Œå…¶ä¸­æ¯ä¸ªåˆ’åˆ†å‡ºæ¥çš„æ¨¡å—æœ‰è¾ƒæ˜æ˜¾çš„ä¸šåŠ¡è¾¹ç•Œï¼Œè™½ç„¶åœ¨ä¸Šå›¾ä¸­åŒºåˆ†äº†å‰å°ã€åå°ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåå°ä¹Ÿæ˜¯åŒæ ·æœ‰æ–‡ç« ã€è¯„è®ºã€ç”¨æˆ·ç­‰ä¸šåŠ¡åŠŸèƒ½çš„ï¼Œå‰å°ä¸åå°å¯ä½¿ç”¨åº”ç”¨ä¸»è¦æ˜¯æƒé™ç²’åº¦ç®¡ç†çš„å·®å¼‚æ€§ï¼Œå¯¹äºæŠ€æœ¯æ´¾ç³»ç»Ÿè€Œè¨€ï¼Œæˆ‘ä»¬çš„åº”ç”¨å¯åˆ†ä¸ºï¼š
1. æ–‡ç« 
2. ä¸“æ 
3. è¯„è®º
4. ç”¨æˆ·
5. æ”¶è—
6. è®¢é˜…
7. è¿è¥
8. å®¡æ ¸
9. ç±»ç›®æ ‡ç­¾
10. ç»Ÿè®¡

#### 3.1.2.4ã€æœåŠ¡å±‚
æˆ‘ä»¬å°†ä¸€äº›é€šç”¨çš„ã€å¯æŠ½ç¦»ä¸šåŠ¡å±æ€§çš„åŠŸèƒ½æ¨¡å—ï¼Œæ²‰æ·€åˆ°æœåŠ¡å±‚ï¼Œä½œä¸ºä¸€ä¸ªä¸€ä¸ªçš„åŸºç¡€æœåŠ¡è¿›è¡Œè®¾è®¡ï¼Œæ¯”å¦‚è®¡æ•°æœåŠ¡ã€æ¶ˆæ¯æœåŠ¡ç­‰ï¼Œé€šå¸¸ä»–ä»¬æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç‹¬ç«‹ä¸ä¸šåŠ¡ä¹‹å¤–ï¼Œé€‚ç”¨æ€§æ›´å¹¿ï¼Œå¹¶ä¸å±€é™åœ¨ç‰¹å®šçš„ä¸šåŠ¡é¢†åŸŸå†…ï¼Œå¯ä»¥ä½œä¸ºé€šç”¨çš„æŠ€æœ¯æ–¹æ¡ˆå­˜åœ¨ã€‚

åœ¨æŠ€æœ¯æ´¾çš„é¡¹ç›®è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬æ‹Ÿå®šä»¥ä¸‹åŸºç¡€æœåŠ¡
1. ç”¨æˆ·æƒé™ç®¡ç† (auth)
2. æ¶ˆæ¯ä¸­å¿ƒ (mq)
3. è®¡æ•° (redis)
4. æœç´¢æœåŠ¡ (es)
5. æ¨è (recommend)
6. ç›‘æ§è¿ç»´ (prometheus)

#### 3.1.2.5ã€å¹³å°èµ„æºå±‚
è¿™ä¸€å±‚å¯ä»¥ç†è§£ä¸ºæ›´åŸºç¡€çš„ä¸‹å±‚æ”¯æ’‘
1. æœåŠ¡èµ„æºï¼šæ•°æ®åº“ã€redisã€esã€mq
2. ç¡¬ä»¶èµ„æºï¼šå®¹å™¨ï¼ŒecsæœåŠ¡å™¨

### 3.1.3ã€æœ¯è¯­ä»‹ç»
æŠ€æœ¯æ´¾æ•´ä¸ªç³»ç»Ÿä¸­æ¶‰åŠåˆ°çš„æœ¯è¯­å¹¶ä¸å¤šï¼Œä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œä¸‹é¢é’ˆå¯¹å‡ ä¸ªå¸¸ç”¨çš„è¿›è¡Œè¯´æ˜
1. ç”¨æˆ·ï¼šç‰¹æŒ‡é€šè¿‡å¾®ä¿¡å…¬ä¼—å·æ‰«ç æ³¨å†Œçš„ç”¨æˆ·ï¼Œå¯ä»¥å‘å¸ƒæ–‡ç« ã€é˜…è¯»æ–‡ç« ç­‰
2. ç®¡ç†å‘˜ï¼šå¯ä»¥ç™»å½•åå°çš„ç‰¹æ®Šç”¨æˆ·
3. æ–‡ç« ï¼šå³åšæ–‡
4. ä¸“æ ï¼šç”±ä¸€ç³»åˆ—ç›¸å…³çš„æ–‡ç« ç»„æˆçš„ä¸€ä¸ªåˆé›†
5. è®¢é˜…ï¼šä¸“æŒ‡å…³æ³¨ç”¨æˆ·

### 3.1.4ã€æŠ€æœ¯æ¶æ„
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170905086.png)


## 3.2ã€ç³»ç»Ÿæ¨¡å—è®¾è®¡
é’ˆå¯¹å‰é¢æŠ€æœ¯æ´¾çš„ä¸šåŠ¡æ¶æ„æ‹†åˆ†ï¼ŒæŠ€æœ¯æ´¾çš„å®é™…é¡¹ç›®åˆ’åˆ†ï¼Œä¸»è¦æ˜¯äº”ä¸ªæ¨¡å—ï¼Œç›¸åå¹¶æ²¡ç”±å°†ä¸Šé¢çš„æ¯ä¸ªåº”ç”¨ã€æœåŠ¡æŠ½ç¦»ä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼Œä¸»è¦æ˜¯ä¸ºäº†é¿å…è¿‡æ¸¡è®¾è®¡ï¼Œç²’åº¦åˆ’åˆ†å¤ªç»†ä¼šå¢åŠ æ•´ä¸ªé¡¹ç›®çš„ç†è§£ç»´æŠ¤æˆæœ¬ã€‚

è¿™é‡Œè®¾ç½®äº”ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—ï¼Œåˆ™ä¸»è¦æ˜¯åŸºäºè¾¹ç•Œç‰¹åˆ«æ¸…æ™°è¿™ä¸€æ€è€ƒç‚¹è¿›è¡Œï¼Œåç»­åšå¾®æœåŠ¡æ¼”è¿›æ—¶ï¼Œä¸‹é¢æ¯ä¸ªæ¨¡å—å¯ä»¥ä½œä¸ºç‹¬ç«‹çš„å¾®æœåŠ¡å­˜åœ¨

### 3.2.1ã€ç”¨æˆ·æ¨¡å—
åœ¨æŠ€æœ¯æ´¾ä¸­ï¼Œæ•´ä¸ªç”¨æˆ·æ¨¡å—ä»åŠŸèƒ½è§’åº¦å¯ä»¥åˆ†ä¸º
1. æ³¨å†Œç™»å½•
2. æƒé™ç®¡ç†ï¼ˆæ˜¯çš„ï¼Œæƒé™ç®¡ç†ä¹Ÿæ”¾åœ¨è¿™é‡Œäº†ï¼‰
3. ä¸šåŠ¡é€»è¾‘

#### 3.2.1.1ã€æ³¨å†Œæ¨¡å—

##### 3.2.1.1.1ã€æ–¹æ¡ˆè®¾è®¡
æ³¨å†Œç™»å½•é™¤äº†å¸¸è§çš„ç”¨æˆ·å+å¯†ç çš„ç™»å½•æ–¹å¼ä¹‹å¤–ï¼Œç°åœ¨ä¹Ÿæœ‰æµè¡Œçš„æ‰‹æœºå·+éªŒè¯ï¼Œç¬¬ä¸‰æ–¹æˆæƒç™»å½•ï¼›æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©å¾®ä¿¡å…¬ä¼—å·ç™»å½•æ–¹å¼ï¼ˆå…¶æœ€ä¸»è¦çš„ç›®çš„ï¼Œç›¸ä¿¡å¤§å®¶ä¹ŸçŸ¥é“...ï¼‰
å¯¹äºä¸ªäººå…¬ä¼—å·ï¼Œå¾ˆå¤šæƒé™æ²¡æœ‰ï¼›å› æ­¤è¿™ä¸ªç™»å½•çš„å…·ä½“å®ç°ï¼Œæœ‰ä¸¤ç§å®ç°ç­–ç•¥ï¼š
1. ç‚¹å‡»ç™»å½•ï¼Œç™»å½•é¡µæ˜¾ç¤ºäºŒç»´ç  + è¾“å…¥æ¡† -> ç”¨æˆ·å…³æ³¨å…¬ä¼—å·ï¼Œè¾“å…¥ "login" è·å–ç™»å½•éªŒè¯ç  -> åœ¨ç™»å½•ç•Œé¢è¾“å…¥éªŒè¯ç å®ç°ç™»å½•
2. ç‚¹å‡»ç™»å½•ï¼Œç™»å½•é¡µæ˜¾ç¤ºäºŒç»´ç  + éªŒè¯ç  -> ç”¨æˆ·å…³æ³¨å…¬ä¼—å·ï¼Œå°†ç™»å½•é¡µé¢ä¸Šçš„éªŒè¯ç è¾“å…¥åˆ°å¾®ä¿¡å…¬ä¼—å· -> è‡ªåŠ¨ç™»å½•

å…¶ä¸­ç¬¬ä¸€ç§ç­–ç•¥ï¼Œç±»ä¼¼äºæ‰‹æœºå·/éªŒè¯ç çš„ç™»å½•æ–¹å¼ï¼Œä¸»è¦æ˜¯æ ¹æ®ç³»ç»Ÿè¿”å›çš„éªŒè¯ç æ¥ä¸»åŠ¨ç™»å½•ã€‚
ä¼˜ç‚¹ï¼šä»£ç å®ç°ç®€å•ï¼Œé€»è¾‘æ¸…æ™°
ç¼ºç‚¹ï¼šæ“ä½œæµç¨‹å¤æ‚ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ä¸¤æ¬¡

å¯¹äºç¬¬äºŒç§ç­–ç•¥ï¼Œå¦‚æœæ˜¯ä¼ä¸šå…¬ä¼—å·ï¼Œæ˜¯å¯ä»¥çœç•¥è¾“å…¥éªŒè¯ç è¿™ä¸€æ­¥éª¤çš„ï¼Œå€ŸåŠ©åŠ¨æ€äºŒç»´ç æ¥ç›´æ¥å®ç°æ‰«ç ç™»å½•ï¼›å¯¹äºæˆ‘ä»¬è¿™ç§ä¸ªäººå…¬ä¼—å·ï¼Œåˆ™éœ€è¦å¤šæ¥ä¸€æ­¥ï¼Œé€šè¿‡è¾“å…¥éªŒè¯ç æ¥å°†å¾®ä¿¡å…¬ä¼—å·çš„ç”¨æˆ·ä¸éœ€è¦ç™»å½•çš„ç”¨æˆ·ç»‘å®šèµ·æ¥
ç™»å½•å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170912635.png)


##### 3.2.1.1.2ã€åº“è¡¨è®¾è®¡
åŸºäºå…¬ä¼—å·çš„ç™»å½•æ–¹å¼ï¼Œçœ‹ä¸€ä¸‹ç”¨æˆ·ç™»å½•è¡¨çš„è®¾è®¡
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170918196.png)

æ³¨æ„ä¸Šé¢çš„è¡¨ç»“æ„è®¾è®¡ï¼Œæˆ‘ä»¬å†—ä½™äº† user_name, password ç”¨æˆ·åå¯†ç çš„ç™»å½•æ–¹å¼ï¼Œä¸»è¦æ˜¯ç»™ç®¡ç†å‘˜ç™»å½•åå°ä½¿ç”¨

ç”¨æˆ·é¦–æ¬¡ç™»å½•ä¹‹åï¼Œä¼šåœ¨userè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œä¸»è¦å…³æ³¨ third_account_id è¿™ä¸ªå­—æ®µï¼Œå®ƒè®°å½•çš„æ˜¯å¾®ä¿¡å¼€æ”¾å¹³å°è¿”å›çš„å”¯ä¸€ç”¨æˆ·id

#### 3.2.1.2ã€æƒé™ç®¡ç†
æƒé™ç®¡ç†ä¼šåˆ†ä¸ºä¸¤å—ï¼šç”¨æˆ·èº«ä»½è¯†åˆ« + é‰´æƒ
##### 3.2.1.2.1ã€æ–¹æ¡ˆè®¾è®¡
ç”¨æˆ·èº«ä»½è¯†åˆ«ï¼š
ç°åœ¨ç”¨æˆ·çš„èº«ä»½è¯†åˆ«æœ‰éå¸¸å¤šçš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬ç°åœ¨é‡‡ç”¨çš„æ˜¯æœ€åŸºç¡€ã€å†å²æœ€æ‚ ä¹…çš„æ–¹æ¡ˆï¼Œcookie + session æ–¹å¼ï¼ˆåç»­ä¼šè¿­ä»£ä¸ºåˆ†å¸ƒå¼session + jwtï¼‰
æ•´ä½“æµç¨‹ï¼š
1. ç”¨æˆ·ç™»å½•æˆåŠŸï¼ŒæœåŠ¡å™¨ç”ŸæˆsessionId -> userId æ˜ å°„å…³ç³»
2. æœåŠ¡å™¨è¿”å›sessionIdï¼Œå†™åˆ°å®¢æˆ·ç«¯çš„æµè§ˆå™¨cookie
3. åç»­ç”¨æˆ·è¯·æ±‚ï¼Œæºå¸¦cookie
4. æœåŠ¡å™¨ä»cookieä¸­è·å–sessionIdï¼Œç„¶åæ‰¾åˆ°uesrId
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170920393.png)

æœåŠ¡å†…éƒ¨èº«ä»½ä¼ é€’ï¼š
å¦å¤–ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„ç‚¹åˆ™æ˜¯ç”¨æˆ·çš„èº«ä»½å¦‚ä½•åœ¨æ•´ä¸ªç³»ç»Ÿå†…ä¼ é€’ï¼Ÿ å¯¹äºä¸€æœŸæˆ‘ä»¬é‡‡ç”¨çš„å•ä½“æ¶æ„è€Œè¨€ï¼Œå€ŸåŠ©ThreadLocalæ¥å®ç°
1. è‡ªå®šä¹‰Filterï¼Œå®ç°ç”¨æˆ·èº«ä»½è¯†åˆ«ï¼ˆå³ä¸Šé¢çš„æµç¨‹ï¼Œä»cookieä¸­æ‹¿åˆ°SessionIdï¼Œè½¬userId)
2. å®šä¹‰å…¨å±€ä¸Šä¸‹æ–‡ReqInfoContextï¼šå°†ç”¨æˆ·ä¿¡æ¯ï¼Œå†™å…¥å…¨å±€å…±äº«çš„ThreadLocalä¸­
3. åœ¨ç³»ç»Ÿå†…ï¼Œéœ€è¦è·å–å½“å‰ç”¨æˆ·çš„åœ°æ–¹ï¼Œç›´æ¥é€šè¿‡è®¿é—® ReqInfoContextä¸Šä¸‹æ–‡è·å–ç”¨æˆ·ä¿¡æ¯
4. è¯·æ±‚è¿”å›å‰ï¼Œé”€æ¯ä¸Šä¸‹æ–‡ä¸­å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯

**é‰´æƒ**
æ ¹æ®ç”¨æˆ·è§’è‰²ä¸æ¥å£æƒé™è¦æ±‚è¿›è¡Œåˆ¤å®šï¼Œæˆ‘ä»¬è®¾è®¡ä¸‰ç§æƒé™ç‚¹ç±»å‹ï¼š
1. ADMINï¼šåªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®çš„æ¥å£
2. LOGINï¼šåªæœ‰ç™»å½•äº†æ‰èƒ½è®¿é—®çš„æ¥å£
3. ALLï¼šé»˜è®¤ï¼Œæ²¡æœ‰æƒé™é™åˆ¶

##### 3.2.1.2.2ã€åº“è¡¨è®¾è®¡
æˆ‘ä»¬å°†ç”¨æˆ·è§’è‰²ä¿¡æ¯å†™å…¥ç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨ä¸­ï¼Œæ²¡æœ‰å•ç‹¬æŠ½å‡ºä¸€ä¸ªè§’è‰²è¡¨ï¼Œç„¶åè¿›è¡Œæ˜ å°„ï¼Œä¸»è¦æ˜¯å› ä¸ºè¿™ä¸ªç³»ç»Ÿé€»è¾‘ç›¸å¯¹æ¸…æ™°ï¼Œæ²¡æœ‰å¤ªå¤æ‚çš„è§’è‰²å…³ç³»ï¼Œå› æ­¤é‡‡ç”¨äº†è½»é‡çº§çš„è®¾è®¡æ–¹æ¡ˆ

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170931072.png)

#### 3.2.1.3ã€ä¸šåŠ¡é€»è¾‘
åœ¨ä¸šåŠ¡æ¨¡å—ï¼Œä¸»è¦è¯´ä¸¤å—ï¼Œä¸€ä¸ªæ˜¯ç”¨æˆ·çš„è½¨è¿¹ï¼Œä¸€ä¸ªæ˜¯è®¢é˜…å…³æ³¨

##### 3.2.1.3.1ã€è®¢é˜…å…³æ³¨
è®¢é˜…å…³æ³¨è¿™å—ä¸šåŠ¡ä¸»è¦æ˜¯ç”¨æˆ·å¯ä»¥ç›¸äº’å…³æ³¨ï¼Œæ ¸å¿ƒç‚¹å°±åœ¨äºç»´æŠ¤ç”¨æˆ·ä¸ç”¨æˆ·ä¹‹é—´çš„è®¢é˜…å…³ç³»

ä¸šåŠ¡é€»è¾‘ä¸Šæ²¡æœ‰å¤ªå¤æ‚çš„ä¸œè¥¿ï¼Œæ ¸å¿ƒå°±æ˜¯éœ€è¦ä¸€å¼ è¡¨æ¥è®°å½•å…³æ³¨ä¸è¢«å…³æ³¨æƒ…å†µ
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170934800.png)

##### 3.2.1.3.2ã€ç”¨æˆ·è½¨è¿¹
åœ¨æŠ€æœ¯æ´¾çš„æ•´ä½“è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›è®°å½•ç”¨æˆ·çš„é˜…è¯»å†å²ã€å…³æ³¨åˆ—è¡¨ã€æ”¶è—åˆ—è¡¨ã€è¯„ä»·çš„æ–‡ç« åˆ—è¡¨ï¼Œå¯¹äºè¿™ç§ç”¨æˆ·è¡Œä¸ºè½¨è¿¹çš„è¯‰æ±‚ï¼Œæˆ‘ä»¬é‡‡ç”¨è®¾è®¡ä¸€å¼ å¤§å®½è¡¨çš„ç­–ç•¥ï¼Œå…¶ä¸»è¦ç›®çš„åœ¨äºï¼š
1. è®°å½•ç”¨æˆ·çš„å…³é”®åŠ¨ä½œ
2. ä¾¿äºæ–‡ç« çš„ç›¸å…³è®¡æ•°

æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹è¡¨ç»“æ„è®¾è®¡
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170935919.png)

æˆ‘ä»¬å°†ç”¨æˆ· + æ–‡ç« è®¾è®¡å”¯ä¸€é”®ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·å¯¹è‡ªå·±é˜…è¯»è¿‡çš„æ–‡ç« çš„è¡Œä¸ºï¼Œå› æ­¤å¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªè¡¨è·å–ç”¨æˆ·çš„å†å²è½¨è¿¹

åŒæ—¶ä¹Ÿå¯ä»¥ä»æ–‡ç« çš„è§’åº¦å‡ºå‘ï¼ŒæŸ¥çœ‹è¢«å“ªäº›ç”¨æˆ·ç‚¹èµã€æ”¶è—è¿‡

#### 3.2.1.4å°ç»“
ç”¨æˆ·æ¨¡å—çš„æ ¸å¿ƒæ”¯æ’‘åœ¨ä¸Šé¢å‡ å—ï¼Œè¯·é‡ç‚¹å…³æ³¨ä¸Šé¢çš„ç¤ºæ„å›¾ä¸è¡¨ç»“æ„ï¼›å½“ç„¶ç”¨æˆ·çš„åŠŸèƒ½ç‚¹ä¸æ­¢äºä¸Šé¢å‡ ä¸ªï¼Œæ¯”å¦‚åŸºç¡€çš„ä¸ªäººä¸»é¡µã€ç”¨æˆ·ä¿¡æ¯ç­‰ä¹Ÿå±äºç”¨æˆ·æ¨¡å—çš„ä¸šåŠ¡èŒƒç•´

### 3.2.2ã€æ–‡ç« æ¨¡å—
æˆ‘ä»¬å°†æ–‡ç« å’Œä¸“æ éƒ½æ”¾åœ¨ä¸€èµ·ï¼ŒåŒæ ·ä¹Ÿå°†ç±»ç›®ç®¡ç†ã€æ ‡ç­¾ç®¡ç†ç­‰ä¹Ÿéƒ½æ”¾åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œå®é™…ä¸Šè‹¥æ–‡ç« æ¨¡å—è¿‡äºåºå¤§ï¼Œä¹Ÿæ˜¯å¯ä»¥æŒ‰ç…§æœ€å¼€å§‹çš„åˆ’åˆ†è¿›è¡Œç»§ç»­æ‹†åˆ†çš„ï¼›è¿™é‡Œæ”¾åœ¨ä¸€èµ·çš„ä¸»è¦åŸå› åœ¨äºä»–ä»¬éƒ½æ˜¯å›´ç»•åŸºæœ¬çš„æ–‡ç« è¿™ä¸€ä¸šåŠ¡å±æ€§æ¥çš„ï¼Œå¯ä»¥èšåˆåœ¨ä¸€èµ·

#### 3.2.2.1ã€æ–‡ç« 
æ–‡ç« çš„æ ¸å¿ƒå°±åœ¨äºå‘å¸ƒã€æŸ¥çœ‹
åŸºæœ¬çš„å‘å¸ƒæµç¨‹ï¼š
1. ç”¨æˆ·ç™»å½•ï¼Œè¿›å…¥å‘å¸ƒé¡µé¢
2. è¾“å…¥æ ‡é¢˜ã€æ–‡ç« 
3. é€‰æ‹©åˆ†ç±»ã€æ ‡ç­¾ï¼Œå°é¢ã€ç®€ä»‹
4. æäº¤æ–‡ç« ï¼Œè¿›å…¥å¾…å®¡æ ¸çŠ¶æ€ï¼Œä»…ç”¨æˆ·å¯çœ‹è¯¦æƒ…
5. ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡ï¼Œæ‰€æœ‰äººå¯çœ‹è¯¦æƒ…
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170956432.png)


#### 3.2.2.2ã€æ–‡ç« åº“è¡¨è®¾è®¡
è€ƒè™‘åˆ°æ–‡ç« çš„å†…å®¹é€šå¸¸è¾ƒå¤§ï¼Œåœ¨å¾ˆå¤šçš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯ä¸éœ€è¦æ–‡ç« å†…å®¹çš„ï¼Œå¦‚é¦–é¡µã€æ¨èåˆ—è¡¨ç­‰éƒ½åªéœ€è¦æ–‡ç« çš„æ ‡é¢˜ç­‰ä¿¡æ¯ï¼›æ­¤å¤–æˆ‘ä»¬ä¹Ÿå¸Œæœ›å¯¹æ–‡ç« åšä¸€ä¸ªç‰ˆæœ¬ç®¡ç†ï¼ˆæ¯”å¦‚ä¸Šçº¿ä¹‹åï¼Œå†ä¿®æ”¹åˆ™æ–°ç”Ÿæˆä¸€ä¸ªç‰ˆæœ¬ï¼‰ã€‚
å› æ­¤æˆ‘ä»¬å¯¹æ–‡ç« è®¾è®¡äº†ä¸¤å¼ è¡¨ï¼š

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170959244.png)

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307170959550.png)

æ–‡ç« å¯¹åº”çš„åˆ†ç±»ï¼Œæˆ‘ä»¬è¦æ±‚ä¸€ä¸ªæ–‡ç« åªèƒ½æŒ‚åœ¨ä¸€ä¸ªåˆ†ç±»ä¸‹
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171001673.png)

æ–‡ç« å¯¹åº”çš„æ ‡ç­¾å±æ€§ï¼Œä¸€ä¸ªæ–‡ç« å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171001995.png)


#### 3.2.2.3ã€ä¸“æ 
ä¸“æ ä¸»è¦æ˜¯ä¸€ç³»åˆ—æ–‡ç« çš„åˆé›†ï¼ŒåŸºäºæ­¤æœ€ç®€å•çš„è®¾è®¡æ–¹æ¡ˆå°±æ˜¯åŠ ä¸€ä¸ªä¸“æ è¡¨ï¼Œç„¶åå†åŠ ä¸€ä¸ªä¸“æ ä¸æ–‡ç« çš„æ˜ å°„è¡¨

ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ä¸“æ ä¸­æ–‡ç« çš„é¡ºåºï¼Œæ”¯æŒè°ƒæ•´

#### 3.2.2.4ã€ä¸“æ è¡¨è®¾è®¡
ä¸“æ è¡¨
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171004482.png)

ä¸“æ æ–‡ç« è¡¨
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171005179.png)

#### 3.2.2.5ã€ç‚¹èµæ”¶è—
å†æŠ€æœ¯æ´¾ä¸­ï¼Œå¯¹äºæ–‡ç« æä¾›äº†ç‚¹èµã€æ”¶è—ã€è¯„è®ºä¸‰ç§äº¤äº’ï¼Œè¿™é‡Œé‡ç‚¹çœ‹ä¸€ä¸‹ç‚¹èµä¸æ”¶è—ï¼›

ç‚¹èµä¸æ”¶è—ï¼Œå®é™…ä¸Šå°±æ˜¯ç”¨æˆ·ä¸æ–‡ç« ä¹‹é—´çš„æ“ä½œè¡Œä¸ºï¼Œå†å‰é¢çš„user_footè¡¨å°±å·²ç»ä»‹ç»å…·ä½“çš„è¡¨ç»“æ„, æ–‡ç« çš„ç»Ÿè®¡è®¡æ•°å°±æ˜¯æ ¹æ®è¿™ä¸ªè¡¨æ•°æ®æ¥çš„ï¼Œå½“å‰ç”¨æˆ·ä¸æ–‡ç« çš„ç‚¹èµã€æ”¶è—å…³ç³»ï¼ŒåŒæ ·æ˜¯æ ¹æ®è¿™ä¸ªè¡¨æ¥çš„

å”¯ä¸€éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œå°±æ˜¯è¿™ä¸ªæ•°æ®çš„æ’å…¥ã€æ›´æ–°ç­–ç•¥ï¼š
1. é¦–æ¬¡é˜…è¯»æ–‡ç« æ—¶ï¼šæ’å…¥ä¸€æ¡æ•°æ®
2. ç‚¹èµï¼šè‹¥è®°å½•å­˜åœ¨ï¼Œåˆ™æ›´æ–°çŠ¶æ€ï¼Œä¹‹å‰æ—¶ç‚¹èµçš„ï¼Œè®¾ç½®ä¸ºå–æ¶ˆç‚¹èµï¼›è‹¥è®°å½•ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥ä¸€æ¡ç‚¹èµçš„è®°å½•
3. æ”¶è—ï¼šåŒä¸Š

### 3.2.3ã€è¯„è®ºæ¨¡å—
è¯„è®ºå¯ä»¥æ˜¯é’ˆå¯¹æ–‡ç« è¿›è¡Œï¼Œä¹Ÿå¯ä»¥æ˜¯é’ˆå¯¹å¦å¤–ä¸€ä¸ªè¯„è®ºè¿›è¡Œå›å¤ï¼Œæˆ‘ä»¬å°†å›å¤ä¹Ÿå½“ä½œæ˜¯ä¸€ä¸ªè¯„è®º

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171006107.png)


#### 3.2.3.1ã€è¯„è®º
æˆ‘ä»¬å°†è¯„è®ºå’Œå›å¤éƒ½å½“æˆæ™®é€šçš„è¯„è®ºï¼Œåªæ˜¯ä¸»ä½“ä¸åŒè€Œå·²ï¼Œå› æ­¤ä¸€ç¯‡æ–‡ç« çš„è¯„è®ºåˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨çš„å°±æ˜¯ï¼Œå¦‚ä½•æ„å»ºè¯„è®ºä¸å…¶å›å¤ä¹‹é—´çš„å±‚çº§å…³ç³»

å¯¹äºè¿™ç§è¯„è®ºä¸å›å¤çš„å±‚çº§å…³ç³»ï¼Œå¯ä»¥æ˜¯å»ºè¾…åŠ©è¡¨æ¥å¤„ç†ï¼›ä¹Ÿå¯ä»¥æ˜¯è¡¨å†…çš„çˆ¶å­å…³ç³»æ¥å¤„ç†ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ç¬¬äºŒç§ç­–ç•¥
1. æ¯ä¸ªè¯„è®ºè®°å½•å®ƒçš„ä¸Šä¸€çº§è¯„è®ºidï¼ˆè‹¥åªæ˜¯é’ˆå¯¹æ–‡ç« çš„è¯„è®ºï¼Œé‚£ä¹ˆä¸Šä¸€çº§è¯„è®ºid = 0ï¼‰
2. æˆ‘ä»¬é€šè¿‡çˆ¶å­å…³ç³»ï¼Œåœ¨ä¸šåŠ¡å±‚è¿›è¡Œé€»è¾‘è¿˜åŸ

#### 3.2.3.2ã€åº“è¡¨è®¾è®¡

é’ˆå¯¹ä¸Šé¢çš„ç­–ç•¥ï¼Œæ ¸å¿ƒçš„è¯„è®ºåº“è¡¨è®¾è®¡å¦‚ä¸‹
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171008255.png)
æ³¨æ„ï¼š
1. ä¸ºä»€ä¹ˆå†è¡¨ä¸­éœ€è¦å†—ä½™ä¸€ä¸ªé¡¶çº§è¯„è®ºid ï¼Ÿ
2. ä¸»è¦çš„ç›®çš„æ˜¯ç®€åŒ–ä¸šåŠ¡å±‚è¯„è®ºå…³ç³»è¿˜åŸçš„å¤æ‚æ€§

é€šè¿‡ä¸Šé¢çš„è¡¨ç»“æ„ï¼Œå…³ç³»è¿˜åŸçš„ç­–ç•¥ï¼š
1. å…ˆæŸ¥å‡ºæ–‡ç« çš„é¡¶çº§è¯„è®ºï¼ˆparent_comment_id = 0ï¼‰
2. æ¥ä¸‹æ¥å°±æ˜¯é’ˆå¯¹æ¯ä¸ªé¡¶çº§è¯„è®ºï¼ŒæŸ¥è¯¢å®ƒä¸‹é¢çš„æ‰€æœ‰å›å¤ ( top_comment_id = comment_id) 
	1. æ„å»ºé¡¶çº§è¯„è®ºä¸‹çš„å›å¤çˆ¶å­å…³ç³»ï¼ˆæ ¹æ®parent_comment_idæ¥æ„å»ºä¾èµ–å…³ç³»ï¼‰
æ‹“å±•ï¼šå¦‚æœä¸å­˜åœ¨top_comment_idï¼Œé‚£ä¹ˆè¦å®ç°ä¸Šé¢è¿™ä¸ªè¿˜åŸï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿ

#### 3.2.3.3ã€è¯„è®ºç‚¹èµ
æŠ€æœ¯æ´¾ä¸­åŒæ ·æ”¯æŒå¯¹è¯„è®ºè¿›è¡Œç‚¹èµï¼Œå–æ¶ˆç‚¹èµï¼›å¯¹äºç‚¹èµçš„æ•´ä½“ä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œå®é™…ä¸Šä¸æ–‡ç« çš„ç‚¹èµä¸€è‡´ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥å¤ç”¨äº†æ–‡ç« çš„ç‚¹èµé€»è¾‘ï¼Œå€ŸåŠ© user_foot æ¥å®ç°çš„

è¯´æ˜ï¼š
1. ä¸Šé¢è¿™ç§å®ç°å¹¶ä¸æ˜¯ä¸€ç§ä¼˜é›…çš„é€‰æ‹©ï¼Œä»user_footçš„è®¾è®¡ä¹Ÿèƒ½çœ‹å‡ºï¼Œå®ƒå®é™…ä¸Šä¸è¯„è®ºç‚¹èµè¿™ä¸ªä¸šåŠ¡æ˜¯æœ‰äº›éš”ç¦»çš„
2. é‡‡ç”¨ä¸Šé¢è¿™ä¸ªæ–¹æ¡ˆçš„ä¸»è¦åŸå› åœ¨äºï¼Œç‚¹èµè¿™ç§å±äºé€šç”¨çš„æœåŠ¡ï¼Œä½¿ç”¨mysqlæ¥ç»´ç³»ç‚¹èµä¸å¦ä»¥åŠè®¡æ•°ç»Ÿè®¡ï¼Œå†æ•°æ®é‡å¤§äº†ä¹‹åï¼ŒåŸºæœ¬ä¸Šç©ä¸è½¬ï¼›åç»­ä¼šä»‹ç»å¦‚ä½•è®¾è®¡ä¸€ä¸ªé€šç”¨çš„ç‚¹èµæœåŠ¡ï¼Œä»¥æ­¤æ¥æ›¿æ¢æŠ€æœ¯æ´¾ä¸­å½“å‰çš„ç‚¹èµå®ç°
3. è¿™ç§è®¾è®¡æ€è·¯ä¹Ÿç»å¸¸ä½“ç°åœ¨ä¸€ä¸ªå…¨æ–°é¡¹ç›®çš„è®¾è®¡ä¸­ï¼Œæœ€å¼€å§‹çš„è®¾è®¡å¹¶ä¸ä¼šæƒ³ç€ä¸€è¹´è€Œå°±ï¼Œæ•´ä¸€ä¸ªéå¸¸å®Œç¾çš„ç³»ç»Ÿå‡ºæ¥ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯åœ¨æœ€å¼€å§‹æ­å¥½åŸºåº§ã€æ–¹ä¾¿åç»­æ‰©å±•ï¼›å¦å¤–ä¸€ç‚¹å°±æ˜¯ï¼Œå¦‚ä½•åœ¨å½“å‰ç³»ç»Ÿçš„åŸºç¡€ä¸Šï¼Œæœ€å°æˆæœ¬çš„æ”¯æŒä¸šåŠ¡éœ€æ±‚ï¼ˆç›¸ä¿¡å„ä½å°ä¼™ä¼´åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œè¿™äº›äº‹æƒ…ä¸ä¼šé™Œç”Ÿï¼‰

### 3.2.4ã€æ¶ˆæ¯æ¨¡å—

æ¶ˆæ¯æ¨¡å—ä¸»è¦æ˜¯è®°å½•ä¸€äº›å®šä¹‰çš„äº‹ä»¶ï¼Œç”¨äºåŒæ­¥ç»™ç”¨æˆ·ï¼›æˆ‘ä»¬æ•´ä½“é‡‡ç”¨Event/Listenerçš„å¼‚æ­¥æ–¹æ¡ˆæ¥è¿›è¡Œ
åœ¨å•æœºåº”ç”¨ä¸­ï¼Œå€ŸåŠ©Spring Event/Listeneræœºåˆ¶æ¥å®ç°ï¼›åœ¨é›†ç¾¤ä¸­ï¼Œå°†å€ŸåŠ©MQæ¶ˆæ¯ä¸­é—´ä»¶æ¥å®ç°

#### 3.2.4.1ã€æ¶ˆæ¯é€šçŸ¥

æˆ‘ä»¬ä¸»è¦å®šä¹‰ä»¥ä¸‹äº”ç§æ¶ˆæ¯ç±»å‹
1. è¯„è®º
2. ç‚¹èµ
3. æ”¶è—
4. å…³æ³¨
5. ç³»ç»Ÿæ¶ˆæ¯
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171013369.png)

å½“å‘ç”Ÿæ–¹é¢çš„è¡Œä¸ºä¹‹åï¼Œå†ç›¸åº”çš„åœ°æ–¹è¿›è¡Œä¸»åŠ¨åŸ‹ç‚¹ï¼Œæ‰‹åŠ¨å‘é€ä¸€ä¸ªæ¶ˆæ¯äº‹ä»¶ï¼Œç„¶åå¼‚æ­¥æ¶ˆè´¹äº‹ä»¶ï¼Œç”Ÿæˆæ¶ˆæ¯é€šçŸ¥

éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼š
1. å½“ç”¨æˆ·ç‚¹èµäº†ä¸€ä¸ªæ–‡ç« ï¼Œäº§ç”Ÿä¸€ä¸ªç‚¹èµæ¶ˆæ¯ä¹‹åï¼›åˆå–æ¶ˆäº†ç‚¹èµï¼Œè¿™ä¸ªæ¶ˆæ¯ä¼šæ€æ ·ï¼Ÿ
2. æ’¤é”€è¿˜æ˜¯ä¾ç„¶ä¿ç•™ï¼Ÿï¼ˆæŠ€æœ¯æ´¾ä¸­é€‰æ‹©çš„æ–¹æ¡ˆæ˜¯æ’¤é”€ï¼‰

#### 3.2.4.2ã€åº“è¡¨è®¾è®¡
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171018973.png)

### 3.2.5ã€é€šç”¨æ¨¡å—
å…³äºæŠ€æœ¯æ´¾ä¸­çš„é€šç”¨æ¨¡å—å¤§è‡´æœ‰ä¸‹é¢å‡ ç§ï¼Œç›¸å…³çš„æŠ€æœ¯æ–¹æ¡ˆä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°†é…åˆåº“è¡¨è¿›è¡Œç®€å•è¯´æ˜

#### 3.2.5.1ã€ç»Ÿè®¡è®¡æ•°

é’ˆå¯¹æ–‡ç« çš„é˜…è¯»è®¡æ•°ï¼Œæ²¡è®¿é—®ä¸€æ¬¡è®¡æ•°+1ï¼Œ å› æ­¤å‰é¢çš„user_footä¸èƒ½ä½¿ç”¨ï¼ˆå› ä¸ºæœªç™»å½•çš„ç”¨æˆ·æ˜¯ä¸ä¼šç”Ÿæˆuser_footè®°å½•çš„ï¼‰

æˆ‘ä»¬å½“å‰è®¾è®¡çš„ä¸€ä¸ªç®€å•çš„è®¡æ•°è¡¨å¦‚ä¸‹
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171020045.png)
æ³¨æ„ï¼Œä¸Šé¢è¿™ä¸ªè®¡æ•°è¡¨ä¸­çš„cntçš„æ›´æ–°ï¼Œä½¿ç”¨ cnt = cnt + 1 è€Œä¸æ˜¯ cnt = xxxçš„æ–¹æ¡ˆ

#### 3.2.5.2ã€pv/uv
æ¯å¤©çš„è¯·æ±‚pv/uvè®¡æ•°ç»Ÿè®¡ï¼Œç›´æ¥å†filterå±‚ä¸­è®°å½•
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171021222.png)


#### 3.2.5.3ã€å…¨å±€å­—å…¸
ç»Ÿä¸€é…ç½®ã€å…¨å±€å­—å…¸ç›¸å…³çš„ï¼Œä¸»è¦æ˜¯å‡å°‘ä»£ç ä¸­çš„ç¡¬ç¼–ç 

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171021338.png)

#### 3.2.5.4ã€å›¾ç‰‡ä¸Šä¼ 

æ–‡ç« çš„å›¾ç‰‡ä¸Šä¼ ï¼Œæˆ‘ä»¬æ”¯æŒæœåŠ¡å™¨æœ¬åœ°å­˜å‚¨å’Œosså­˜å‚¨ï¼Œå…¶ä¸­devå¼€å‘ç¯å¢ƒï¼Œé»˜è®¤æ˜¯æœ¬åœ°å­˜å‚¨ï¼Œå³å›¾ç‰‡ä¼ åˆ°æœ¬åœ°çš„ä¸€ä¸ªç›®å½•ä¸‹ï¼›prodç”Ÿäº§ç¯å¢ƒï¼Œä¼šå°†å›¾ç‰‡ä¸Šä¼ åˆ°é˜¿é‡Œäº‘çš„ossï¼ˆå…¶ä»–å‚å•†çš„ossä¹Ÿæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Œéƒ½æ˜¯ä¸€ä¸ªpostè¯·æ±‚ï¼Œå°†æ–‡ä»¶ä¸Šä¼ è€Œå·²ï¼‰

æ³¨æ„ï¼š
1. å†å…·ä½“çš„å®ç°ä¸­ï¼Œéœ€è¦è‡ªåŠ¨æ£€æµ‹æ–‡ç« ä¸­çš„å›¾ç‰‡ï¼Œè¿›è¡Œè½¬å­˜ï¼Œé¿å…ç›´æ¥å¼•å…¥å¤–éƒ¨çš„èµ„æºï¼Œå¯¼è‡´å¤±æ•ˆé—®é¢˜
2. ä¸‹è½½å¤–ç½‘èµ„æºï¼Œæ˜¯å¦ä¼šæœ‰å®‰å…¨é—®é¢˜ï¼Ÿ 
	1. é‡‡ç”¨èµ„æºç±»å‹é™åˆ¶ã€æ ¡éªŒ
	2. ç”Ÿäº§ç¯å¢ƒä¸­ä¸å­˜å‚¨èµ„æºåˆ°æœ¬åœ°æœåŠ¡å™¨/æˆ–è€…é™åˆ¶æœ¬åœ°å­˜å‚¨çš„æ–‡ä»¶å
3. ä¸‹è½½å¤–ç½‘èµ„æºï¼Œè½¬å­˜æ˜¯å¦ä¼šå¯¼è‡´æ•´ä¸ªæ–‡ç« å‘å¸ƒè¿‡ç¨‹å¾ˆæ…¢ï¼Ÿ 
	1. å¹¶å‘è½¬å­˜ç­–ç•¥

#### 3.2.5.5ã€æœç´¢æ¨è

æŠ€æœ¯æ´¾å½“å‰çš„æœç´¢æ¨èä¸»è¦æ˜¯åŸºäºæ•°æ®åº“æ¥å®ç°ï¼Œåç»­å†ä»‹ç»esç›¸å…³æ•™ç¨‹æ—¶ï¼Œä¼šåŒæ­¥å¼•å…¥ESè¿›è¡Œæ›¿æ¢å½“å‰çš„æ•°æ®åº“æ–¹æ¡ˆ

## 3.3ã€è¿­ä»£æ’æœŸ
å†è¯¦ç»†è®¾è®¡è¿™ä¸€é˜¶æ®µï¼Œä¸€èˆ¬æ¥è¯´ä¼šé¢„ä¼°ä¸€ä¸‹æ•´ä½“æå®Œéœ€è¦å¤šå°‘äººå¤©ï¼Œé‰´äºå®é™…æƒ…å†µåˆ†å‡ ä¸ªè¿­ä»£ç‰ˆæœ¬è¿›è¡Œï¼Œæ¯ä¸ªç‰ˆæœ¬çš„ä¸»è¦åŠŸèƒ½ç‚¹æœ‰å“ªäº›ï¼›è¿™ä¸€å—å°±é€šè¿‡ä¸‹é¢å‡ å¼ å›¾ç®€å•ç»™å¤§å®¶ä»‹ç»ä¸‹ï¼Œè¯¦æƒ…æ¨èæŸ¥çœ‹é¡¹ç›®ç®¡ç†æµç¨‹çš„å†…å®¹

å½“å‰æŠ€æœ¯æ´¾è¦†ç›–åŠŸèƒ½ç‚¹å¦‚ä¸‹ï¼š
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307171026110.png)




# 4ã€æŠ€æœ¯æ´¾æœ¬åœ°å¤šæœºå™¨éƒ¨ç½²å¼€å‘æ•™ç¨‹

åœ¨å®é™…çš„å…¬å¸é¡¹ç›®å¼€å‘ï¼Œé€šå¸¸db\redis\es\mqç­‰éƒ½æœ‰ä¸€å¥—å¼€å‘ç¯å¢ƒï¼Œä¸ç”¨æ¯ä¸ªäººéƒ½åœ¨è‡ªå·±çš„æœºå™¨ä¸Šè¿›è¡Œéƒ¨ç½²ï¼Œè‡ªå·±çš„æœºå™¨ä¸Šå°±ç›´æ¥è·‘é¡¹ç›®ä»£ç å°±è¡Œã€‚

æŠ€æœ¯æ´¾ä¹‹å‰çš„æœ¬åœ°ç¯å¢ƒé…ç½®æ•™ç¨‹ï¼Œä¸»è¦é’ˆå¯¹çš„æ˜¯å•æœºéƒ¨ç½²æ‰€æœ‰éœ€è¦çš„æœåŠ¡ï¼Œå’Œå®é™…çš„å·¥ä½œç¯å¢ƒæœ‰ä¸€ç‚¹åŒºåˆ«ï¼›æ¥ä¸‹æ¥æˆ‘å°±å€Ÿç€å›ç­”ä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œå°†å¤šæœºå™¨å¼€å‘ç¯å¢ƒçš„æ•™ç¨‹ä¹Ÿä¸€å¹¶è¡¥ä¸Š

## 4.1ã€åˆ†é…åŸåˆ™

å¤šæœºå™¨å¼€å‘æ—¶ï¼Œæœ€å¸¸è§çš„é…ç½®æ–¹å¼å°±æ˜¯æå‡ å°ç‹¬ç«‹çš„æœºå™¨ï¼Œéƒ¨ç½²å¤§å®¶å…±ç”¨çš„æœåŠ¡ï¼Œå¦‚æ•°æ®åº“mysqlï¼Œredisç¼“å­˜ï¼Œesæœç´¢ï¼Œmqæ¶ˆæ¯é˜Ÿåˆ—ï¼Œzkç­‰ï¼›ç„¶åè‡ªå·±çš„å¼€å‘ç¬”è®°æœ¬/å°å¼æœºä¸Šç›´æ¥æ‹‰ä»£ç è¿›è¡Œæœ¬åœ°å¼€å‘è°ƒè¯•

å› æ­¤æˆ‘ä»¬é‡‡ç”¨çš„åˆ†é…æ–¹å¼ï¼š
1. èµ„æºæœºå™¨ï¼šéƒ¨ç½²mysql,redis
2. å¼€å‘æœºå™¨ï¼šè¿è¡ŒæŠ€æœ¯æ´¾é¡¹ç›®
éœ€è¦åšçš„äº‹æƒ…ï¼š
1. èµ„æºæœºå™¨ä¸Šï¼Œéƒ¨ç½²ç›¸å…³çš„æœåŠ¡
2. ä¿®æ”¹ç›¸å…³é…ç½®ï¼Œå…è®¸è¿œç¨‹è®¿é—®ï¼ˆé€šå¸¸å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¦‚mysql/rediséƒ½åªå…è®¸æœ¬æœºè®¿é—®ï¼‰
3. å¿…è¦æ—¶ï¼Œå…³é—­èµ„æºæœºå™¨ä¸Šçš„é˜²ç«å¢™
4. ä¿®æ”¹é¡¹ç›®ä»£ç ä¸­devå¯¹åº”çš„é…ç½®æ–‡ä»¶ä¸­çš„èµ„æºè®¿é—®åœ°å€

## 4.2ã€é…ç½®å…¨è¿‡ç¨‹

### 4.2.1ã€MySQLå±€åŸŸç½‘è®¿é—®é…ç½®

é¦–å…ˆæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸‹æƒé™ï¼Œè®©æˆ‘ä»¬å¯ä»¥è·¨æœºå™¨è®¿é—®æ•°æ®åº“ï¼Œæœ€ç®€å•çš„æµ‹è¯•æ–¹å¼å¯ä»¥å¦‚ä¸‹

1. æŸ¥æ‰¾æœ¬æœºå±€åŸŸç½‘
   ![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307200954274.png)

æµ‹è¯•ä¸‹é€šè¿‡å±€åŸŸç½‘æ–¹å¼è®¿é—®
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307200955553.png)


ä½¿ç”¨ä¸Šé¢çš„å§¿åŠ¿ï¼Œå‘ç°ç¡®å®è®¿é—®ä¸äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦å…ˆè®¾ç½®ä¸€ä¸‹mysqlçš„è®¿é—®æƒé™ï¼Œå¼€å¯å±€åŸŸç½‘çš„è®¿é—®è®¾ç½®

#### æƒé™é…ç½®
```sh
mysql -uroot

> use mysql;
> select user, host from user;
```

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307200957487.png)

æˆ‘ä»¬ç°åœ¨éœ€è¦æ–°å¢ä¸€ä¸ªroot -> % çš„è®¿é—®è´¦å·

```sh
# åˆ›å»ºè´¦å·
> create user 'root'@'%' identified by '';

# æˆæƒ
> grant all privileges on *.* to 'root'@'%';
> flush privileges;

# æŸ¥çœ‹ç”¨æˆ·
> select user, host from user;
```

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307200958050.png)

ä¸Šé¢é…ç½®å®Œæ¯•ä¹‹åï¼Œå¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹æ˜¯å¦å¯ä»¥é€šè¿‡å±€åŸŸç½‘è®¿é—®ï¼›è‹¥ä¾ç„¶è®¿é—®ä¸äº†ï¼Œåˆ™çœ‹ä¸€ä¸‹mysql.cnfé…ç½®ï¼ˆåœ¨windwosä¸Šåº”è¯¥æ˜¯my.iniï¼Œåœ¨centos7ä¸Šæ˜¯my.confï¼‰

```sh
vim /etc/mysql/mysql.conf.d/mysqld.cnf

# æ³¨é‡Šæ‰ bind = 127.0.0.1 è¿™ä¸€è¡Œ
```

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307201004126.png)

é‡å¯mysql
```sh
sudo service mysql restart
```

é‡æ–°æµ‹è¯•ï¼š
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307201005087.png)


### 4.2.2ã€Redsiè¿œç¨‹è®¿é—®é…ç½®

é»˜è®¤æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨ redis-serverå‘½ä»¤å¯åŠ¨çš„åŒæ ·æ— æ³•è¿›è¡Œè¿œç¨‹è®¿é—®ï¼Œ
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307201006519.png)

æ­¤æ—¶å¯ä»¥é€šè¿‡è°ƒæ•´é…ç½®æ–‡ä»¶ï¼Œæ¥ä¿®æ”¹

ä¸»è¦éœ€è¦ä¿®æ”¹ä¸¤ä¸ªé…ç½®:
1. æ³¨é‡Šæ‰  bind 127.0.0.1
2. ä¿®æ”¹ protected-mode no    -- é»˜è®¤æ˜¯yesï¼Œéœ€è¦ä¿®æ”¹ä¸ºno
åå°å¯åŠ¨é…ç½®ï¼šdaemonize yes

é‚£ä¹ˆé…ç½®æ–‡ä»¶å¯ä»¥å†å“ªé‡Œè·å–ï¼Ÿ
- /etc/redis/redis.conf
è°ƒæ•´å®Œæ¯•ä¹‹åï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶æ–¹å¼è¿›è¡Œå¯åŠ¨
```sh
redis-server /etc/redis/redis.conf
```


å¦‚æœå‘ç°å¯åŠ¨åæœ‰æƒé™é—®é¢˜ï¼š
![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307201008275.png)

è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼š
1. åˆ‡rootè´¦å·æ‰§è¡Œå‘½ä»¤ï¼Œ
2. æ‹·è´redis.confé…ç½®æ–‡ä»¶åˆ°å½“å‰ç›®å½•, è°ƒæ•´æ— æƒé™è·¯å¾„å¦‚Logæ—¥å¿—ï¼Œpidè¿›ç¨‹æ–‡ä»¶
æˆ‘ä»¬é‡‡ç”¨ç¬¬ä¸€ç§ç®€å•æ–¹å¼ï¼Œå†æ¬¡å¯åŠ¨ä¹‹åå°±å¯ä»¥è¿œç¨‹è®¿é—®äº†

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307201008576.png)

### 4.2.3ã€é¡¹ç›®ä»£ç é…ç½®
å½“ä½¿ç”¨å±€åŸŸç½‘çš„æœºå™¨è¿›è¡Œæœ¬åœ°å¼€å‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†devé…ç½®æ–‡ä»¶ä¸­çš„db/redisçš„é…ç½®è·¯å¾„ï¼ŒåŒæ ·è¿›è¡Œä¿®æ”¹
```sh
paicoding-web\src\main\resources-env\dev\application-dal.yml
```

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/202307201010654.png)

å°†æ•°æ®åº“åœ°å€ï¼Œè°ƒæ•´ä¸ºå±€åŸŸç½‘å†…çš„dbå’ŒredisæœåŠ¡å™¨ï¼Œç„¶åç›´æ¥å¯åŠ¨å³å¯ï¼Œå…¶ä»–æ— éœ€åšä»»ä½•ä¿®æ”¹

### 4.2.4ã€å¯åŠ¨æµ‹è¯•
æ¯”å¦‚æˆ‘ä½¿ç”¨ä¸€å°ç¬”è®°æœ¬192.168.31.203ï¼Œå¼€å¯ mysql, redis;
ç„¶åå†å¦å¤–ä¸€å°ç¬”è®°æœ¬ 192.168.31.157 è¿›è¡ŒæŠ€æœ¯æ´¾çš„å¼€å‘ï¼Œ
157è¿™å°ç¬”è®°æœ¬å°†æŠ€æœ¯æ´¾å¯åŠ¨ä¹‹åï¼Œå†203è¿™å°æœºå™¨å°±å¯ä»¥é€šè¿‡å±€åŸŸç½‘ipè¿›è¡Œè®¿é—®äº†ã€‚


