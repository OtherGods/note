# 1ã€æ•°ç»„ä¸­é‡å¤çš„æ•°å­—

## æè¿°

æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—ã€‚

åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼š
[2, 3, 1, 0, 2, 5, 3]
è¾“å‡ºï¼š2 æˆ– 3 
```

 

**é™åˆ¶ï¼š**

```
2 <= n <= 100000
```



## æ–¹æ³•ä¸€ï¼šæš´åŠ›æ±‚è§£

- æ€è·¯ï¼šéå†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œç„¶ååœ¨å‰©ä¸‹çš„å…ƒç´ ä¸­å¯»æ‰¾æ˜¯å¦å­˜åœ¨ç›¸åŒçš„å…ƒç´ 

  ```java
  public int findRepeatNumber(int[] nums) {
      for (int i = 0; i < nums.length; i++) {
          for (int j = i + 1; j < nums.length; j++) {
              if (nums[i] == nums[j]) {
                  return nums[i];
              }
          }
      }
      return -1;
  }
  ```

- æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)
  
- ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)

## æ–¹æ¡ˆäºŒï¼šå“ˆå¸ŒæŸ¥æ‰¾

- æ€è·¯ï¼šåœ¨æš´åŠ›è§£æ³•ä¸­ï¼Œæˆ‘ä»¬å…ˆéå†æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå†ä»å…¶ä½™çš„å…ƒç´ ä¸­æŸ¥æ‰¾è¿™ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå…¶å®è¿™é‡Œè¦çš„å°±æ˜¯èƒ½é«˜æ•ˆçš„åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œå› ä¸ºå“ˆå¸Œè¡¨åˆ¤æ–­æ˜¯å¦å­˜åœ¨çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚

  ä½¿ç”¨å“ˆå¸Œè¡¨åçš„ç®—æ³•æ­¥éª¤æ˜¯ï¼š

  â€‹    å…ˆåˆå§‹åŒ–ä¸€ä¸ªå“ˆå¸Œè¡¨ (HashSet)
  â€‹    ç„¶åéå†æ¯ä¸€ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«å¯¹æ¯ä¸€ä¸ªå…ƒç´ åšå¦‚ä¸‹çš„å¤„ç†ï¼š
  â€‹        å…ˆåˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå…ƒç´ 
  â€‹        å¦‚æœå­˜åœ¨çš„è¯ï¼Œåˆ™è¯´æ˜è¿™ä¸ªå…ƒç´ é‡å¤ï¼Œåˆ™ç›´æ¥è¿”å›
  â€‹        å¦åˆ™ï¼Œå°†è¿™ä¸ªå…ƒç´ åŠ å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œæ–¹ä¾¿åç»­çš„åˆ¤é‡
  
  
  
  ```java
public int findRepeatNumber(int[] nums) {
      // 1. åˆå§‹åŒ–ä¸€ä¸ªå“ˆå¸Œè¡¨
    Set<Integer> set = new HashSet<>();
      for (int i = 0; i < nums.length; i++) {
          // 2. åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å·²ç»å­˜åœ¨
          if (set.contains(nums[i])) {
              // å¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›
              return nums[i];
          }
          // å¦åˆ™çš„è¯ï¼Œå°†å½“å‰å…ƒç´ æ”¾å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œæ–¹ä¾¿åç»­çš„æŸ¥æ‰¾åˆ¤é‡
          set.add(nums[i]);
      }
      return -1;
  }
  ```
  
- æ—¶é—´å¤æ‚åº¦ä¸ºO(n)

- ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)

  æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œå¯¹äºæ•°æ®è§„æ¨¡ 10 ä¸‡çº§åˆ«çš„è¯ï¼Œè¿è¡Œé€Ÿåº¦æ˜¯å¯ä»¥æ¥å—çš„ã€‚ä½†æ˜¯è¿™é‡Œçš„ç©ºé—´å¤æ‚åº¦åˆ™å˜ä¸º O(n)ï¼Œå› ä¸ºå“ˆå¸Œè¡¨éœ€è¦ç”³è¯·é¢å¤–çš„ n ä¸ªç©ºé—´ï¼Œè¿™é‡Œç”¨åˆ°çš„æ˜¯å…¸å‹çš„ç©ºé—´æ¢æ—¶é—´çš„æ€æƒ³

  

## æ–¹æ¡ˆä¸‰ï¼šæ•°ç»„ä»£æ›¿å“ˆå¸Œè¡¨

- æ€è·¯ï¼šæœ‰ä¸€ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸‹ï¼Œé‚£å°±æ˜¯æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å¤§å°åœ¨ 0 ~ n - 1 çš„èŒƒå›´å†…ã€‚åˆ©ç”¨è¿™ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ•°ç»„ä»£æ›¿ä¸Šé¢æ–¹æ¡ˆäºŒçš„å“ˆå¸Œè¡¨â€”â€”>

  - å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ bucketï¼Œç„¶åå°†æ‰€æœ‰çš„å…ƒç´ åˆå§‹åŒ–ä¸º -1
  - åœ¨æŸ¥æ‰¾å¤„ç†çš„æ—¶å€™ä½¿ç”¨åŸæ•°ç»„çš„å…ƒç´ ä½œä¸ºæ•°ç»„çš„ä¸‹æ ‡ï¼ŒåŸæ•°ç»„å…ƒç´ å¯¹åº”çš„ä¸‹æ ‡ä½œä¸ºæ•°ç»„çš„å…ƒç´ å€¼ï¼ˆå…¶å®åœ¨è¿™ç§æ–¹å¼ä¸­æ•°ç»„ä¸­å­˜å‚¨ä»€ä¹ˆä¹Ÿæ²¡å…³ç³»ï¼Œåªè¦ä¸æ˜¯-1å°±è¡Œï¼‰ã€‚ï¼ˆä¹Ÿå°±æ˜¯æŠŠæœ¬åº”è¯¥è¢«æŸ¥è¯¢çš„å…ƒç´ ä½œä¸ºæŸ¥è¯¢çš„æ–¹å¼ï¼Œå’Œé¢˜ç›®ç´§å¯†ç»“åˆï¼‰

  ```java
  public int findRepeatNumber(int[] nums) {
      // 1. åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„
      int[] bucket = new int[nums.length];
      Arrays.fill(bucket, -1);
  
      for (int i = 0; i < nums.length; i++) {
          // 2. åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å·²ç»å­˜åœ¨
          if (bucket[nums[i]] != -1) {
              // å¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›
              return nums[i];
          }
  
          // å¦åˆ™çš„è¯ï¼Œå°†å½“å‰å…ƒç´ ä½œä¸ºç´¢å¼•ï¼Œå½“å‰å…ƒç´ çš„ä¸‹æ ‡ä½œä¸ºå€¼ï¼Œå¡«å…¥æ•°ç»„ä¸­ï¼Œ
          // æ–¹ä¾¿åç»­çš„æŸ¥æ‰¾åˆ¤é‡
          bucket[nums[i]] = i;
      }
      return -1;
  }
  ```

- æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)

- ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)

  æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯å’Œç”¨å“ˆå¸Œè¡¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ä½¿ç”¨æ•°ç»„ç»å¯¹ä¼šæœ‰æ€§èƒ½çš„æé«˜ï¼Œä¸»è¦è¡¨ç°åœ¨å¦‚ä¸‹çš„ä¸¤ä¸ªæ–¹é¢ï¼š

  â€‹    å“ˆå¸Œè¡¨ (HashSet) åº•å±‚æ˜¯ä½¿ç”¨æ•°ç»„ + é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ç»„æˆçš„ï¼Œè€Œä¸”å®ƒçš„æ•°ç»„ä¹Ÿæ˜¯ç”¨ä¸æ»¡çš„ï¼Œæœ‰åŠ è½½å› å­çš„ã€‚æ‰€ä»¥ä½¿ç”¨æ•°ç»„æ¥ä»£æ›¿å“ˆå¸Œè¡¨ï¼Œèƒ½èŠ‚çœç©ºé—´
â€‹    å“ˆå¸Œè¡¨åœ¨åˆ¤é‡çš„æ—¶å€™éœ€è¦ç»è¿‡å“ˆå¸Œè®¡ç®—ï¼Œè¿˜å¯èƒ½å­˜åœ¨å“ˆå¸Œå†²çªçš„æƒ…å†µï¼Œè€Œä½¿ç”¨æ•°ç»„åˆ™å¯ä»¥ç›´æ¥è®¡ç®—å¾—åˆ° index çš„å†…å­˜ä½ç½®ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°ç»„è®¿é—®æ€§èƒ½æ›´å¥½ã€‚
  
  

## æ–¹æ³•å››ï¼šæœ€ä¼˜è§£æ³•

æ€è·¯ï¼šåœ¨æ–¹æ³•å››çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œæ²¡æœ‰å†æ–°åˆ›å»ºæ•°ç»„ï¼Œè€Œæ˜¯é€‰æ‹©ç›´æ¥åœ¨å‚æ•°çš„æ•°ç»„ä¸­è¿›è¡Œäº¤æ¢ï¼Œåœ¨äº¤æ¢çš„è¿‡ç¨‹ä¸­åŒæ—¶è¿˜éœ€è¦åˆ¤æ–­å¾…äº¤æ¢çš„å…ƒç´ æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒåˆ™ç›´æ¥è¿”å›æ— éœ€å†æ¬¡äº¤æ¢ã€‚

```java
public int findRepeatNumber(int[] nums) {
    for (int i = 0; i < nums.length; i++) {
        while (i != nums[i]) {

            if (nums[i] == nums[nums[i]]) {
                return nums[i];
            }

            // äº¤æ¢
            int tmp = nums[nums[i]];
            nums[nums[i]] = nums[i];
            nums[i] = tmp;
        }
    }
    
    return -1;
}
```



- æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)
- ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)



# 2. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾

## æè¿°

åœ¨ä¸€ä¸ª n * m çš„äºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªé«˜æ•ˆçš„å‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚

ç¤ºä¾‹:

ç°æœ‰çŸ©é˜µ matrix å¦‚ä¸‹ï¼š

[
  [1,   4,  7, 11, 15],
  [2,   5,  8, 12, 19],
  [3,   6,  9, 16, 22],
  [10, 13, 14, 17, 24],
  [18, 21, 23, 26, 30]
]

ç»™å®š target = 5ï¼Œè¿”å› trueã€‚

ç»™å®š target = 20ï¼Œè¿”å› falseã€‚

é™åˆ¶ï¼š

0 <= n <= 1000

0 <= m <= 1000



## æ–¹æ³•ä¸€ï¼šæš´åŠ›

- æ€è·¯ï¼šå¦‚æœä¸è€ƒè™‘äºŒç»´æ•°ç»„æ’å¥½åºçš„ç‰¹ç‚¹ï¼Œåˆ™ç›´æ¥éå†æ•´ä¸ªäºŒç»´æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œåˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨äºŒç»´æ•°ç»„ä¸­å­˜åœ¨ã€‚
  ä¾æ¬¡éå†äºŒç»´æ•°ç»„çš„æ¯ä¸€è¡Œå’Œæ¯ä¸€åˆ—ã€‚å¦‚æœæ‰¾åˆ°ä¸€ä¸ªå…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœéå†å®Œæ¯•ä»æœªæ‰¾åˆ°ç­‰äºç›®æ ‡å€¼çš„å…ƒç´ ï¼Œåˆ™è¿”å› falseã€‚

  ```java
  class Solution {
      public boolean findNumberIn2DArray(int[][] matrix, int target) {
          if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {
              return false;
          }
          int rows = matrix.length, columns = matrix[0].length;
          //éå†è¡Œ
          for (int i = 0; i < rows; i++) {
              //éå†åˆ—
              for (int j = 0; j < columns; j++) {
                  if (matrix[i][j] == target) {
                      return true;
                  }
              }
          }
          return false;
      }
  }
  ```

  

- æ—¶é—´å¤æ‚åº¦ï¼šO(nm)O(nm)O(nm)ã€‚äºŒç»´æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è¢«éå†ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºäºŒç»´æ•°ç»„çš„å¤§å°ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)O(1)ã€‚

## æ–¹æ³•äºŒï¼šçº¿æ€§æŸ¥æ‰¾

æ€è·¯ï¼š

ç”±äºç»™å®šçš„äºŒç»´æ•°ç»„å…·å¤‡æ¯è¡Œä»å·¦åˆ°å³é€’å¢ä»¥åŠæ¯åˆ—ä»ä¸Šåˆ°ä¸‹é€’å¢çš„ç‰¹ç‚¹ï¼Œå½“è®¿é—®åˆ°ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¯ä»¥æ’é™¤æ•°ç»„ä¸­çš„éƒ¨åˆ†å…ƒç´ ã€‚

ä»äºŒç»´æ•°ç»„çš„å³ä¸Šè§’å¼€å§‹æŸ¥æ‰¾ã€‚å¦‚æœå½“å‰å…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è¿”å› trueã€‚å¦‚æœå½“å‰å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œåˆ™ç§»åˆ°å·¦è¾¹ä¸€åˆ—ã€‚å¦‚æœå½“å‰å…ƒç´ å°äºç›®æ ‡å€¼ï¼Œåˆ™ç§»åˆ°ä¸‹è¾¹ä¸€è¡Œã€‚

â€‹    è‹¥æ•°ç»„ä¸ºç©ºï¼Œè¿”å› false
â€‹    åˆå§‹åŒ–è¡Œä¸‹æ ‡ä¸º 0ï¼Œåˆ—ä¸‹æ ‡ä¸ºäºŒç»´æ•°ç»„çš„åˆ—æ•°å‡ 1
â€‹    é‡å¤ä¸‹åˆ—æ­¥éª¤ï¼Œç›´åˆ°è¡Œä¸‹æ ‡æˆ–åˆ—ä¸‹æ ‡è¶…å‡ºè¾¹ç•Œ
â€‹        è·å¾—å½“å‰ä¸‹æ ‡ä½ç½®çš„å…ƒç´  num
â€‹        å¦‚æœ num å’Œ target ç›¸ç­‰ï¼Œè¿”å› true
â€‹        å¦‚æœ num å¤§äº targetï¼Œåˆ—ä¸‹æ ‡å‡ 1
â€‹        å¦‚æœ num å°äº targetï¼Œè¡Œä¸‹æ ‡åŠ  1
â€‹    å¾ªç¯ä½“æ‰§è¡Œå®Œæ¯•ä»æœªæ‰¾åˆ°å…ƒç´ ç­‰äº target ï¼Œè¯´æ˜ä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œè¿”å› false

> å…³é”®å­—ï¼šèµ·å§‹å…ƒç´ ã€å½“å‰å…ƒç´ ï¼ˆç§»åŠ¨çš„åæ ‡åŸç‚¹ï¼‰ã€ç›®æ ‡å…ƒç´ ã€å½“å‰å…ƒç´ é™„è¿‘çš„å…ƒç´ ï¼ˆä¸Šä¸‹å·¦å³ï¼‰
>
> é—®é¢˜ 1ï¼šæ‰¾å…ƒç´ çš„æ–¹å¼æ˜¯ä»€ä¹ˆ
> é—®é¢˜ 2ï¼šä¸ºä»€ä¹ˆå¿…é¡»è¦ä»¥ä¸ºå·¦ä¸‹è§’æˆ–å³ä¸Šè§’ä¸ºèµ·å§‹ç‚¹
> é—®é¢˜ 3ï¼šä¸ºä»€ä¹ˆä»¥å³ä¸Šè§’å’Œå·¦ä¸‹è§’ä¸ºèµ·å§‹å…ƒç´ æ—¶èƒ½æ‰¾åˆ°çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ 
>
> åˆ†æï¼š
>
> ![1](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\1.png)
>
> æ³¨æ„ï¼šé¢˜ç›®ä¸­çš„çŸ©é˜µä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„åæ ‡ç³»ï¼Œæˆ‘åœ¨è¿™é‡Œè´´ä¸€å¼ åæ ‡ç³»çš„å›¾ä»…ä»…æ˜¯ä¸ºäº†æ˜ç¡®æ–¹å‘ã€è¡¨æ˜å…³ç³»

```java
class Solution {
    public boolean findNumberIn2DArray(int[][] matrix, int target) {
        if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {
            return false;
        }
        int rows = matrix.length, columns = matrix[0].length;
        int row = 0, column = columns - 1;
        while (row < rows && column >= 0) {
            int num = matrix[row][column];
            if (num == target) {
                return true;
            } else if (num > target) {
                column--;
            } else {
                row++;
            }
        }
        return false;
    }
}
```

- æ—¶é—´å¤æ‚åº¦ï¼šO(n+m)O(n+m)O(n+m)ã€‚è®¿é—®åˆ°çš„ä¸‹æ ‡çš„è¡Œæœ€å¤šå¢åŠ  n æ¬¡ï¼Œåˆ—æœ€å¤šå‡å°‘ m æ¬¡ï¼Œå› æ­¤å¾ªç¯ä½“æœ€å¤šæ‰§è¡Œ n + m æ¬¡ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚

# 3. æ›¿æ¢ç©ºæ ¼

## æè¿°

è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² s ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ"%20"ã€‚

 

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šs = "We are happy."
è¾“å‡ºï¼š"We%20are%20happy."

é™åˆ¶ï¼š

0 <= s çš„é•¿åº¦ <= 10000

## æ–¹æ³•ä¸€ï¼šå­—ç¬¦æ•°ç»„

æ€è·¯ï¼š

ç”±äºæ¯æ¬¡æ›¿æ¢ä» 1 ä¸ªå­—ç¬¦å˜æˆ 3 ä¸ªå­—ç¬¦ï¼Œä½¿ç”¨å­—ç¬¦æ•°ç»„å¯æ–¹ä¾¿åœ°è¿›è¡Œæ›¿æ¢ã€‚å»ºç«‹å­—ç¬¦æ•°ç»„åœ°é•¿åº¦ä¸º s çš„é•¿åº¦çš„ 3 å€ï¼Œè¿™æ ·å¯ä¿è¯å­—ç¬¦æ•°ç»„å¯ä»¥å®¹çº³æ‰€æœ‰æ›¿æ¢åçš„å­—ç¬¦ã€‚

â€‹    è·å¾— s çš„é•¿åº¦ length
â€‹    åˆ›å»ºå­—ç¬¦æ•°ç»„ arrayï¼Œå…¶é•¿åº¦ä¸º length * 3
â€‹    åˆå§‹åŒ– size ä¸º 0ï¼Œsize è¡¨ç¤ºæ›¿æ¢åçš„å­—ç¬¦ä¸²çš„é•¿åº¦
â€‹    ä»å·¦åˆ°å³éå†å­—ç¬¦ä¸² s
â€‹        è·å¾— s çš„å½“å‰å­—ç¬¦ c
â€‹        å¦‚æœå­—ç¬¦ c æ˜¯ç©ºæ ¼ï¼Œåˆ™ä»¤ array[size] = '%'ï¼Œarray[size + 1] = '2'ï¼Œarray[size + 2] = '0'ï¼Œå¹¶å°† size çš„å€¼åŠ  3
â€‹        å¦‚æœå­—ç¬¦ c ä¸æ˜¯ç©ºæ ¼ï¼Œåˆ™ä»¤ array[size] = cï¼Œå¹¶å°† size çš„å€¼åŠ  1
â€‹    éå†ç»“æŸä¹‹åï¼Œsize çš„å€¼ç­‰äºæ›¿æ¢åçš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä» array çš„å‰ size ä¸ªå­—ç¬¦åˆ›å»ºæ–°å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›æ–°å­—ç¬¦ä¸²

```java
class Solution {
    public String replaceSpace(String s) {
        int length = s.length();
        char[] array = new char[length * 3];
        int size = 0;
        for (int i = 0; i < length; i++) {
            char c = s.charAt(i);
            if (c == ' ') {
                array[size++] = '%';
                array[size++] = '2';
                array[size++] = '0';
            } else {
                array[size++] = c;
            }
        }
        String newStr = new String(array, 0, size);
        return newStr;
    }
}
```

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚éå†å­—ç¬¦ä¸² `s` ä¸€éã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚é¢å¤–åˆ›å»ºå­—ç¬¦æ•°ç»„ï¼Œé•¿åº¦ä¸º `s` çš„é•¿åº¦çš„ 3 å€ã€‚

## æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ

æ€è·¯ï¼šå¦‚æœæƒ³æŠŠè¿™é“é¢˜ç›®åšåˆ°æè‡´ï¼Œå°±ä¸è¦åªç”¨é¢å¤–çš„è¾…åŠ©ç©ºé—´äº†ï¼

é¦–å…ˆæ‰©å……æ•°ç»„åˆ°æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ"%20"ä¹‹åçš„å¤§å°ã€‚

ç„¶åä»åå‘å‰æ›¿æ¢ç©ºæ ¼ï¼Œä¹Ÿå°±æ˜¯åŒæŒ‡é’ˆæ³•ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š

iæŒ‡å‘æ–°æ•°ç»„çš„å¤´éƒ¨ï¼ŒjæŒ‡å‘æ—§æ•°ç»„çš„æœ«å°¾ï¼ŒiæŒ‡é’ˆå’ŒjæŒ‡é’ˆä¸­é—´çš„æ˜¯å·²ç»ç§»åŠ¨åˆ°æ–°æ•°ç»„ä¸­å¯¹åº”ä½ç½®çš„å…ƒç´ ï¼Œå½“iå’Œjæœ€åæŒ‡å‘åŒä¸€ä¸ªå…ƒç´ çš„æ—¶å€™å°±æ„å‘³ç€å·²ç»ç§»åŠ¨å®Œæˆäº†ã€‚

æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯æŠŠåŸæ¥æ—§çš„æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç§»åŠ¨åˆ°æ”¾å¤§ä¸‰å€çš„æ•°ç»„çš„å¯¹åº”çš„æœ€åä½ç½®ï¼ˆå› ä¸ºiæŒ‡é’ˆç§»åŠ¨çš„é€Ÿåº¦æ¯”jæŒ‡é’ˆç§»åŠ¨çš„é€Ÿåº¦å¿«ï¼Œæ¯å½“jé‡è§ç©ºæ ¼åç§»åŠ¨ä¸€ä¸ªä½ç½®æ—¶ï¼Œiä¼šç§»åŠ¨ä¸‰ä¸ªä½ç½®ï¼Œæœ€åå¦‚æœjæŒ‡å‘çš„ä½ç½®ä¹‹å‰çš„å…ƒç´ ï¼‰

ç®€å•çš„åŠ¨å›¾æè¿°
![image-20220821211959328](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\image-20220821211959328.png)
![image-20220821212028271](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\image-20220821212028271.png)
![image-20220821212051588](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\image-20220821212051588.png)

```java
//è¿™ä¸ªä»£ç å®ç°çš„æ²¡æœ‰å®Œå…¨æŒ‰ç…§æ€è·¯å»å†™
//ä½¿ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¤åˆ¶ strï¼Œå¤åˆ¶çš„è¿‡ç¨‹å¯¹å…¶åˆ¤æ–­ï¼Œæ˜¯ç©ºæ ¼åˆ™æ›¿æ¢ï¼Œå¦åˆ™ç›´æ¥å¤åˆ¶ï¼Œç±»ä¼¼äºæ•°ç»„å¤åˆ¶
public static String replaceSpace(StringBuffer str) {
    if (str == null) {
        return null;
    }
    //é€‰ç”¨ StringBuilder å•çº¿ç¨‹ä½¿ç”¨ï¼Œæ¯”è¾ƒå¿«ï¼Œé€‰ä¸é€‰éƒ½è¡Œ
    StringBuilder sb = new StringBuilder();
    //ä½¿ç”¨ sb é€ä¸ªå¤åˆ¶ str ï¼Œç¢°åˆ°ç©ºæ ¼åˆ™æ›¿æ¢ï¼Œå¦åˆ™ç›´æ¥å¤åˆ¶
    for (int i = 0; i < str.length(); i++) {
        //str.charAt(i) ä¸º char ç±»å‹ï¼Œä¸ºäº†æ¯”è¾ƒéœ€è¦å°†å…¶è½¬ä¸ºå’Œ " " ç›¸åŒçš„å­—ç¬¦ä¸²ç±»å‹
        if (" ".equals(String.valueOf(str.charAt(i)))){
            sb.append("%20");
        } else {
            sb.append(str.charAt(i));
        }
    }
    return sb.toString();
}
```

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)

# 4. ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨

## æè¿°

è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä»å°¾åˆ°å¤´åè¿‡æ¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼ˆç”¨æ•°ç»„è¿”å›ï¼‰ã€‚

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šhead = [1,3,2]
è¾“å‡ºï¼š[2,3,1]

é™åˆ¶ï¼š

0 <= é“¾è¡¨é•¿åº¦ <= 10000

## æ–¹æ³•ä¸€ï¼šæ ˆ

æ€è·¯ï¼š

æ ˆçš„ç‰¹ç‚¹æ˜¯åè¿›å…ˆå‡ºï¼Œå³æœ€åå‹å…¥æ ˆçš„å…ƒç´ æœ€å…ˆå¼¹å‡ºã€‚è€ƒè™‘åˆ°æ ˆçš„è¿™ä¸€ç‰¹ç‚¹ï¼Œä½¿ç”¨æ ˆå°†é“¾è¡¨å…ƒç´ é¡ºåºå€’ç½®ã€‚ä»é“¾è¡¨çš„å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡å°†æ¯ä¸ªèŠ‚ç‚¹å‹å…¥æ ˆå†…ï¼Œç„¶åä¾æ¬¡å¼¹å‡ºæ ˆå†…çš„å…ƒç´ å¹¶å­˜å‚¨åˆ°æ•°ç»„ä¸­ã€‚

â€‹    åˆ›å»ºä¸€ä¸ªæ ˆï¼Œç”¨äºå­˜å‚¨é“¾è¡¨çš„èŠ‚ç‚¹
â€‹    åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆï¼Œåˆå§‹æ—¶æŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹
â€‹    å½“æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ éç©ºæ—¶ï¼Œé‡å¤ä¸‹åˆ—æ“ä½œï¼š
â€‹        å°†æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹å‹å…¥æ ˆå†…
â€‹        å°†æŒ‡é’ˆç§»åˆ°å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
â€‹    è·å¾—æ ˆçš„å¤§å° sizeï¼Œåˆ›å»ºä¸€ä¸ªæ•°ç»„ printï¼Œå…¶å¤§å°ä¸º size
â€‹    åˆ›å»ºä¸‹æ ‡å¹¶åˆå§‹åŒ– index = 0
â€‹    é‡å¤ size æ¬¡ä¸‹åˆ—æ“ä½œï¼š
â€‹        ä»æ ˆå†…å¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†è¯¥èŠ‚ç‚¹çš„å€¼å­˜åˆ° print[index]
â€‹        å°† index çš„å€¼åŠ  1
â€‹    è¿”å› print

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) { val = x; }
 * }
 */
class Solution {
    public int[] reversePrint(ListNode head) {
        Stack<ListNode> stack = new Stack<ListNode>();
        ListNode temp = head;
        while (temp != null) {
            stack.push(temp);
            temp = temp.next;
        }
        int size = stack.size();
        int[] print = new int[size];
        for (int i = 0; i < size; i++) {
            print[i] = stack.pop().val;
        }
        return print;
    }
}
```

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ã€‚æ­£å‘éå†ä¸€éé“¾è¡¨ï¼Œç„¶åä»æ ˆå¼¹å‡ºå…¨éƒ¨èŠ‚ç‚¹ï¼Œç­‰äºåˆåå‘éå†ä¸€éé“¾è¡¨ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚é¢å¤–ä½¿ç”¨ä¸€ä¸ªæ ˆå­˜å‚¨é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚





# 5. é‡å»ºäºŒå‰æ ‘

## æè¿°

è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·æ„å»ºè¯¥äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚

å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚

>  è¡¥å……ï¼šå…ˆåº+ä¸­åºã€ååº+ä¸­åºå¯ä»¥å”¯ä¸€ç¡®å®šä»¥å¯ä¸€é¢—äºŒå‰æ ‘
>
> åˆ†æï¼šå…ˆåº+ä¸­åº å¯ä»¥ç¡®å®šå”¯ä¸€ä¸€é¢—äºŒå‰æ ‘çš„åŸå› 
>
> 1. å…¶ä¸­å…ˆåºå¯ä»¥ç¡®å®šä¸€é¢—äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œåœ¨å…ˆåºåºåˆ—ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦å°±æ˜¯äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ˆè®°ä½œRï¼‰ï¼Œè¿™ä¸ªæ ¹èŠ‚ç‚¹ï¼ˆRï¼‰åœ¨å¯ä»¥åœ¨ä¸­åºä¸­æ‰¾åˆ°ï¼Œå°†ä¸­åºåºåˆ—åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦è¾¹çš„éƒ¨åˆ†ï¼ˆè®°ä½œMï¼‰æ˜¯äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹Rçš„å·¦å­æ ‘ï¼Œå³è¾¹éƒ¨åˆ†ï¼ˆè®°ä½œNï¼‰æ˜¯äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹Rçš„å³å­æ ‘ï¼›
> 2. å…ˆåºä¸­çš„ç¬¬äºŒä¸ªå­—ç¬¦æ˜¯Rçš„å·¦å­æ ‘ä¸­çš„æ ¹èŠ‚ç‚¹ï¼ˆè®°ä½œR~L1~ï¼‰ï¼Œè¿™ä¸ªæ ¹èŠ‚ç‚¹åœ¨Måºåˆ—ä¸­å¯ä»¥æ‰¾åˆ°ï¼Œå› ä¸ºMåºåˆ—ä¹Ÿæ˜¯ä¸­åºéå†çš„ç»“æœï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªèŠ‚ç‚¹å°†Måºåˆ—åˆ†ä¸ºä¸¤ä¸ªåºåˆ—ï¼Œåˆ†åˆ«æ˜¯R~L1~çš„å·¦å­æ ‘ï¼ˆè®°ä½œPï¼‰å’Œå³å­æ ‘ï¼ˆQï¼‰ä¸­åºéå†çš„ç»“æœï¼›
> 3. å…ˆåºåˆ—ä¸­çš„ç¬¬ä¸‰ä¸ªå­—ç¬¦æ˜¯R~L1~çš„å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ˆè®°ä½œR~LL1~ï¼‰ï¼Œè¿™ä¸ªæ ¹èŠ‚ç‚¹åœ¨Påºåˆ—ä¸­å¯ä»¥å°†Påºåˆ—åˆ†ä¸ºä¸¤éƒ¨åˆ†â€¦â€¦
> 4. â€¦â€¦
>
> åœ¨ä¸Šé¢çš„åˆ†æè¿‡ç¨‹ä¸­ï¼Œæ˜¯æ ¹æ®å‰åºéå†å¾—åˆ°çš„åºåˆ—å¯¹ä¸­åºéå†å¾—åˆ°çš„åºåˆ—è¿›è¡Œåˆ†å‰²ï¼šæŒ‰ç…§æ ¹èŠ‚ç‚¹ï¼›å…ˆåºåˆ—ä¸­çš„æ¯ä¸ªç¬¦å·éƒ½å¯ä»¥çœ‹ä½œæ˜¯äºŒå‰æ ‘ä¸­çš„æ ¹èŠ‚ç‚¹ï¼Œéƒ½å¯ä»¥åœ¨å¯¹åº”çš„ä¸­åºåºåˆ—ä¸­ï¼Œå°†ä¸­åºåºåˆ—åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼›
> è¿˜å¯ä»¥æ ¹æ®ä¸­åºéå†å¾—åˆ°çš„åºåˆ—å¯¹å‰åºéå†å¾—åˆ°çš„åºåˆ—è¿›è¡Œåˆ†å‰²ï¼šæŒ‰ç…§æ ¹èŠ‚ç‚¹å·¦å³å­æ ‘çš„ä¸ªæ•°ï¼›å‰åºéå†å¾—åˆ°çš„åºåˆ—ä¸­å·¦å­æ ‘èŠ‚ç‚¹çš„è¿°ç›®ç­‰äºä¸­åºéå†ä¸­æ ¹èŠ‚ç‚¹ç¬¦å·å·¦ä¾§åºåˆ—çš„ä¸ªæ•°ï¼Œè¿™æ ·å°±èƒ½åœ¨å‰åºéå†ä¸­æ‰¾å‡ºå·¦å­æ ‘å’Œå³å­æ ‘çš„å‰åºéå†çš„åºåˆ—äº†ã€‚
>
> å¦ä¸€ç§åŠå¯è§†åŒ–çš„ç†è§£æ–¹å¼ï¼š
>
> å¯¹äºä»»æ„ä¸€é¢—æ ‘è€Œè¨€ï¼Œå‰åºéå†çš„å½¢å¼æ€»æ˜¯
>
> â€‹		[ æ ¹èŠ‚ç‚¹, [å·¦å­æ ‘çš„å‰åºéå†ç»“æœ], [å³å­æ ‘çš„å‰åºéå†ç»“æœ] ] 		å…¶ä¸­[å·¦å­æ ‘çš„å‰åºéå†ç»“æœ]æ˜¯é€’å½’çš„è¿™ç§å½¢å¼
>
> å³æ ¹èŠ‚ç‚¹æ€»æ˜¯å‰åºéå†ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚è€Œä¸­åºéå†çš„å½¢å¼æ€»æ˜¯
>
> â€‹		[ [å·¦å­æ ‘çš„ä¸­åºéå†ç»“æœ], æ ¹èŠ‚ç‚¹, [å³å­æ ‘çš„ä¸­åºéå†ç»“æœ] ]		å…¶ä¸­[å·¦å­æ ‘çš„ä¸­åºéå†ç»“æœ]æ˜¯é€’å½’çš„è¿™ç§å½¢å¼

ç¤ºä¾‹ 1:
![image-20220822201542345](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\image-20220822201542345.png)

Input: preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
Output: [3,9,20,null,null,15,7]

ç¤ºä¾‹ 2:

Input: preorder = [-1], inorder = [-1]
Output: [-1]

é™åˆ¶ï¼š

0 <= èŠ‚ç‚¹ä¸ªæ•° <= 5000

## æ–¹æ³•ä¸€ï¼šé€’å½’

æ€è·¯ï¼šæè¿°ä¸­çš„åˆ†æ

```java
class Solution {
    class TreeNode{
        private TreeNode right;
        private TreeNode left;
        private int value;
    
        public TreeNode(int value)
        {
            this.value = value;
        }
        
        @Override
        public String toString()
        {
            return value+"";
        }
    }
    
    private Map<Integer, Integer> indexMap;
    
    public TreeNode myBuildTree(int[] preorder, int[] inorder, int preorder_left, int preorder_right, int inorder_left, int inorder_right) {
        if (preorder_left > preorder_right) {
            return null;
        }
        
        // å‰åºéå†ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯æ ¹èŠ‚ç‚¹
        int preorder_root = preorder_left;
        // åœ¨ä¸­åºéå†ä¸­å®šä½æ ¹èŠ‚ç‚¹
        int inorder_root = indexMap.get(preorder[preorder_root]);
        
        // å…ˆæŠŠæ ¹èŠ‚ç‚¹å»ºç«‹å‡ºæ¥
        TreeNode root = new TreeNode(preorder[preorder_root]);
        // å¾—åˆ°å·¦å­æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ç›®
        int size_left_subtree = inorder_root - inorder_left;
        
        
        // é€’å½’åœ°æ„é€ å·¦å­æ ‘ï¼Œå¹¶è¿æ¥åˆ°æ ¹èŠ‚ç‚¹
        // å…ˆåºéå†ä¸­ã€Œä» å·¦è¾¹ç•Œ+1 å¼€å§‹çš„ size_left_subtreeã€ä¸ªå…ƒç´ å°±å¯¹åº”äº†ä¸­åºéå†ä¸­ã€Œä» å·¦è¾¹ç•Œ å¼€å§‹åˆ° æ ¹èŠ‚ç‚¹å®šä½-1ã€çš„å…ƒç´ 
        root.left = myBuildTree(preorder, inorder, preorder_left + 1, preorder_left + size_left_subtree, inorder_left, inorder_root - 1);
        
        
        // é€’å½’åœ°æ„é€ å³å­æ ‘ï¼Œå¹¶è¿æ¥åˆ°æ ¹èŠ‚ç‚¹
        // å…ˆåºéå†ä¸­ã€Œä» å·¦è¾¹ç•Œ+1+å·¦å­æ ‘èŠ‚ç‚¹æ•°ç›® å¼€å§‹åˆ° å³è¾¹ç•Œã€çš„å…ƒç´ å°±å¯¹åº”äº†ä¸­åºéå†ä¸­ã€Œä» æ ¹èŠ‚ç‚¹å®šä½+1 åˆ° å³è¾¹ç•Œã€çš„å…ƒç´ 
        root.right = myBuildTree(preorder, inorder, preorder_left + size_left_subtree + 1, preorder_right, inorder_root + 1, inorder_right);
        return root;
    }
    
    public TreeNode buildTree(int[] preorder, int[] inorder) {
        int n = preorder.length;
        // æ„é€ å“ˆå¸Œæ˜ å°„ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½æ ¹èŠ‚ç‚¹
        indexMap = new HashMap<Integer, Integer>();
        for (int i = 0; i < n; i++) {
            indexMap.put(inorder[i], i);
        }
        return myBuildTree(preorder, inorder, 0, n - 1, 0, n - 1);
    }
}

//æµ‹è¯•ç±»
public class test{
    public static void main(String[] args)
    {
        Solution.TreeNode treeNode = new Solution().buildTree(new int[]{3, 9, 20, 15, 7}, new int[]{9, 3, 15, 20, 7});
        System.out.println(treeNode);
    }
}
```



## æ–¹æ³•äºŒï¼šè¿­ä»£

çœ‹èµ·æ¥æœ‰äº›å¤æ‚ï¼Œå…ˆè·³è¿‡å»äº†ï¼šhttps://leetcode.cn/problems/zhong-jian-er-cha-shu-lcof/solution/mian-shi-ti-07-zhong-jian-er-cha-shu-by-leetcode-s/





# 6. äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹

## æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œå…¶ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ä½•æ‰¾å‡ºä¸­åºéå†åºåˆ—çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Ÿæ³¨æ„ï¼Œæ ‘ä¸­çš„èŠ‚ç‚¹ä¸ä»…åŒ…å«å·¦å³å­èŠ‚ç‚¹ï¼ŒåŒæ—¶åŒ…å«æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚

èŠ‚ç‚¹ä»£ç å¦‚ä¸‹ï¼š

```java
public class TreeLinkNode {
    int val;
    TreeLinkNode left = null;
    TreeLinkNode right = null;
    // çˆ¶èŠ‚ç‚¹
    TreeLinkNode parent = null;

    TreeLinkNode(int val) {
        this.val = val;
    }
}
```

æµ‹è¯•ç”¨ä¾‹

æ™®é€šäºŒå‰æ ‘ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼›ä¸å®Œå…¨äºŒå‰æ ‘ï¼‰ã€‚
ç‰¹æ®ŠäºŒå‰æ ‘ï¼ˆæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰å³å­èŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼›æ‰€æœ‰èŠ‚ç‚¹éƒ½æ²¡æœ‰å·¦å­èŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼›åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼›äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹æŒ‡é’ˆä¸ºnullï¼‰ã€‚
ä¸åŒä½ç½®çš„èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ã€å³å­—æ•°çš„æœ€å·¦å­èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹ã€è·¨å±‚çš„çˆ¶èŠ‚ç‚¹ç­‰ï¼›å½“å‰èŠ‚ç‚¹æ²¡æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼‰

é¢˜ç›®è€ƒç‚¹

è€ƒå¯Ÿåº”è˜è€…å¯¹äºŒå‰æ ‘ä¸­åºéå†çš„ç†è§£ç¨‹åº¦ã€‚
è€ƒå¯Ÿåº”è˜è€…åˆ†æå¤æ‚é—®é¢˜çš„èƒ½åŠ›ã€‚åº”è˜è€…åªæœ‰ç”»å‡ºäºŒå‰æ ‘çš„ç»“æ„å›¾ã€é€šè¿‡å…·ä½“çš„ä¾‹å­æ‰¾å‡ºä¸­åºéå†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„è§„å¾‹ï¼Œæ‰æœ‰å¯èƒ½è®¾è®¡å‡ºå¯è¡Œçš„ç®—æ³•ã€‚(æ„Ÿè§‰ä¸Šæ‰¾è§„å¾‹å¾ˆé‡è¦)

## æ–¹æ³•ä¸€ï¼šæˆ‘çš„åˆ†æ

æ€è·¯ï¼šåœ¨ä»¥å¯å·²ç»çŸ¥é“ç»“æ„çš„äºŒå‰æ ‘ä¸­æ‰¾æŸä¸ªèŠ‚ç‚¹åœ¨ä¸­åºéå†çš„æƒ…å†µä¸‹çš„åä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š

1. è¯¥èŠ‚ç‚¹æœ‰å³å­æ ‘
   1. å¦‚æœè¯¥èŠ‚ç‚¹æœ‰å³å­æ ‘ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªä»¥ä¸­åºéå†çš„æ–¹å¼å¾—åˆ°çš„èŠ‚ç‚¹ä¸ºå³å­æ ‘æœ€å·¦è¾¹çš„èŠ‚ç‚¹ï¼Œ
2. è¯¥èŠ‚ç‚¹æ²¡æœ‰å³å­æ ‘ï¼›
   1. å¦‚æœè¯¥èŠ‚ç‚¹æ²¡æœ‰å³å­æ ‘ï¼Œé‚£ä¹ˆåˆåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š
      1. è¯¥èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹çš„å·¦ä¾§
         1. è¿™ç§æƒ…å†µä¸‹è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å°±æ˜¯è¯¥èŠ‚ç‚¹åœ¨ä¸­åºéå†çš„æƒ…å†µä¸‹çš„åä¸€ä¸ªèŠ‚ç‚¹
      2. è¯¥èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹çš„å³ä¾§
         1. åœ¨è¿™ç§æƒ…å†µä¸‹è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å¦‚æœå­˜åœ¨ï¼Œå¹¶ä¸”è¿™ä¸ªçˆ¶èŠ‚ç‚¹æ˜¯ä»–è‡ªå·±çš„çˆ¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹ï¼Œé‚£ä¹ˆï¼Œè¯¥èŠ‚ç‚¹çš„è¿™ç§çˆ·çˆ·èŠ‚ç‚¹å°±æ˜¯åœ¨ä¸­åºéå†çš„æƒ…å†µä¸‹çš„åä¸€ä¸ªèŠ‚ç‚¹

ä¸Šè¿°åˆ†æçš„å›¾
![image-20220822213203355](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\image-20220822213203355.png)

```java
/**
 * äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
 *
 * @Author rex
 * 2018/6/13
 */
public class Solution {

    /**
     * å¯»æ‰¾äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
     *
     * @param pNode
     * @return
     */
    public TreeLinkNode GetNext(TreeLinkNode pNode) {
        if (pNode == null) {
            return null;
        }
        // ç¬¬ä¸€ç§æƒ…å†µ
        if (pNode.right != null) {
            TreeLinkNode rNode = pNode.right;
            while (rNode.left != null) {
                rNode = rNode.left;
            }
            return rNode;
        } else {
            // ç¬¬äºŒç§æƒ…å†µ
            while (pNode.parent != null) {
                TreeLinkNode parentNode = pNode.parent;
                if (parentNode.left == pNode) {
                    return parentNode;
                }
                pNode = pNode.parent;

            }
        }
        return null;
    }


    public static void main(String[] args)
    {
        //æ ¹æ®å…ˆåºå’Œä¸­åºæ„å»ºäºŒå‰æ ‘
        MyTreeNode myTreeNode = new Solution().buildTree(new int[]{1,2,4,8,9,5,10,3,6,11,7}, new int[]{8,4,9,2,5,10,1,6,11,3,7});
        System.out.println(myTreeNode);

        //æŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œåœ¨ä¸­åºéå†çš„ç»“æœä¸‹ï¼ŒèŠ‚ç‚¹4çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸º9
        System.out.println(GetNext(Solution.testflag4));

        //æŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œåœ¨ä¸­åºéå†çš„ç»“æœä¸‹ï¼ŒèŠ‚ç‚¹7çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºnull
        System.out.println(GetNext(Solution.testflag7));

        //æŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œåœ¨ä¸­åºéå†çš„ç»“æœä¸‹ï¼ŒèŠ‚ç‚¹11çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸º3
        System.out.println(GetNext(Solution.testflag11));
    }
}
```

é…å¥—çš„èŠ‚ç‚¹ç±»

```java
//äºŒå‰æ ‘ç»“æ„
class MyTreeNode {
    int val;
    MyTreeNode left = null;
    MyTreeNode right = null;
    // çˆ¶èŠ‚ç‚¹
    MyTreeNode parent = null;
    
    public MyTreeNode(int val) {
        this.val = val;
    }
    
    @Override
    public String toString()
    {
        return val + "";
    }
}
```

å°†ç¬¬äº”é¢˜ä¸­çš„é€’å½’æ–¹å¼çš„ä»£ç ä¿®æ”¹äº†ä¸€ä¸‹ï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯è¿™é‡Œçš„è¿™ä¸ªMyTreeNodeç±»ä½œä¸ºèŠ‚ç‚¹ï¼Œå¹¶ä¸”åœ¨é€’å½’ä¸­æ·»åŠ è¿›å»äº†å½“å‰èŠ‚ç‚¹å¯¹çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨

```java
class Solution {
    //åœ¨æµ‹è¯•ç±»ä¸­è¦ç”¨åˆ°çš„äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹
    public static MyTreeNode testflag4 = null;
    public static MyTreeNode testflag7 = null;
    public static MyTreeNode testflag11 = null;

    private Map<Integer, Integer> indexMap;

    public MyTreeNode myBuildTree(MyTreeNode root0, int[] preorder, int[] inorder, int preorder_left, int preorder_right, int inorder_left, int inorder_right) {
        if (preorder_left > preorder_right) {
            return null;
        }

        // å‰åºéå†ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯æ ¹èŠ‚ç‚¹
        int preorder_root = preorder_left;
        // åœ¨ä¸­åºéå†ä¸­å®šä½æ ¹èŠ‚ç‚¹
        int inorder_root = indexMap.get(preorder[preorder_root]);

        // å…ˆæŠŠæ ¹èŠ‚ç‚¹å»ºç«‹å‡ºæ¥
        MyTreeNode root = new MyTreeNode(preorder[preorder_root]);

        //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        //ä¸ºäº†ä¸€é¢—å·²ç»æ„é€ å¥½çš„äºŒå‰æ ‘ä¸­æŸä¸ªèŠ‚ç‚¹åœ¨ä¸­åºéå†æƒ…å†µä¸‹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å“ªä¸ªç”¨çš„æµ‹è¯•æ•°æ®
        if(preorder[preorder_root] == 4)
            Solution.testflag4 = root;

        if(preorder[preorder_root] == 7)
            Solution.testflag7 = root;

        if(preorder[preorder_root] == 11)
            Solution.testflag11 = root;
        //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        // å¾—åˆ°å·¦å­æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ç›®
        int size_left_subtree = inorder_root - inorder_left;

        //è¿æ¥å½“å‰èŠ‚ç‚¹ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹æ˜¯ä»ä¸Šæ­¤è°ƒç”¨ä¼ é€’è¿›æ¥çš„
        root.parent = (root0 == null ? null:root0);

        // é€’å½’åœ°æ„é€ å·¦å­æ ‘ï¼Œå¹¶è¿æ¥åˆ°æ ¹èŠ‚ç‚¹
        // å…ˆåºéå†ä¸­ã€Œä» å·¦è¾¹ç•Œ+1 å¼€å§‹çš„ size_left_subtreeã€ä¸ªå…ƒç´ å°±å¯¹åº”äº†ä¸­åºéå†ä¸­ã€Œä» å·¦è¾¹ç•Œ å¼€å§‹åˆ° æ ¹èŠ‚ç‚¹å®šä½-1ã€çš„å…ƒç´ 
        root.left = myBuildTree(root, preorder, inorder, preorder_left + 1, preorder_left + size_left_subtree, inorder_left, inorder_root - 1);

        // é€’å½’åœ°æ„é€ å³å­æ ‘ï¼Œå¹¶è¿æ¥åˆ°æ ¹èŠ‚ç‚¹
        // å…ˆåºéå†ä¸­ã€Œä» å·¦è¾¹ç•Œ+1+å·¦å­æ ‘èŠ‚ç‚¹æ•°ç›® å¼€å§‹åˆ° å³è¾¹ç•Œã€çš„å…ƒç´ å°±å¯¹åº”äº†ä¸­åºéå†ä¸­ã€Œä» æ ¹èŠ‚ç‚¹å®šä½+1 åˆ° å³è¾¹ç•Œã€çš„å…ƒç´ 
        root.right = myBuildTree(root, preorder, inorder, preorder_left + size_left_subtree + 1, preorder_right, inorder_root + 1, inorder_right);
        return root;
    }

    public MyTreeNode buildTree(int[] preorder, int[] inorder) {
        int n = preorder.length;
        // æ„é€ å“ˆå¸Œæ˜ å°„ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½æ ¹èŠ‚ç‚¹
        indexMap = new HashMap<Integer, Integer>();
        for (int i = 0; i < n; i++) {
            indexMap.put(inorder[i], i);
        }
        return myBuildTree(null, preorder, inorder, 0, n - 1, 0, n - 1);
    }
}
```

æµ‹è¯•ä»£ç ä¸­ç”¨åˆ°çš„å›¾ï¼š
![image-20220822222840930](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\image-20220822222840930.png)

# 7. ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—

## æè¿°

ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHead æ“ä½œè¿”å› -1 )

 

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼š
["CQueue","appendTail","deleteHead","deleteHead"]
[[],[3],[],[]]
è¾“å‡ºï¼š[null,null,3,-1]

ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼š
["CQueue","deleteHead","appendTail","appendTail","deleteHead","deleteHead"]
[[],[],[5],[2],[],[]]
è¾“å‡ºï¼š[null,-1,null,null,5,2]

æç¤ºï¼š

1 <= values <= 10000
æœ€å¤šä¼šå¯¹ appendTailã€deleteHead è¿›è¡Œ 10000 æ¬¡è°ƒç”¨

## æ–¹æ³•ä¸€ï¼šåŒæ ˆ

æ€è·¯ï¼šå°†ä¸€ä¸ªæ ˆå½“ä½œè¾“å…¥æ ˆï¼Œç”¨äºå‹å…¥ appendTailä¼ å…¥çš„æ•°æ®ï¼›å¦ä¸€ä¸ªæ ˆå½“ä½œè¾“å‡ºæ ˆï¼Œç”¨äº deleteHeadæ“ä½œã€‚

æ¯æ¬¡ deleteHeadæ—¶ï¼Œè‹¥è¾“å‡ºæ ˆä¸ºç©ºåˆ™å°†è¾“å…¥æ ˆçš„å…¨éƒ¨æ•°æ®ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥è¾“å‡ºæ ˆï¼Œè¿™æ ·è¾“å‡ºæ ˆä»æ ˆé¡¶å¾€æ ˆåº•çš„é¡ºåºå°±æ˜¯é˜Ÿåˆ—ä»é˜Ÿé¦–å¾€é˜Ÿå°¾çš„é¡ºåºã€‚

è¿™æ˜¯å®˜æ–¹çš„è§£å†³æ–¹å¼ï¼Œä½¿ç”¨ä¸¤ä¸ªåŒç«¯é˜Ÿåˆ—å»å®ç°ä¸€ä¸ªé˜Ÿåˆ—éœ€è¦åšçš„äº‹æƒ…ğŸ˜‚ï¼Œå’Œé¢˜ç›®è¯´çš„ä¸å¤ªä¸€è‡´ã€‚

```java
class CQueue {
    Deque<Integer> inStack;
    Deque<Integer> outStack;

    public CQueue() {
        inStack = new ArrayDeque<Integer>();
        outStack = new ArrayDeque<Integer>();
    }

    public void appendTail(int value) {
        inStack.push(value);
    }

    public int deleteHead() {
        if (outStack.isEmpty()) {
            if (inStack.isEmpty()) {
                return -1;
            }
            in2out();
        }
        return outStack.pop();
    }

    private void in2out() {
        while (!inStack.isEmpty()) {
            outStack.push(inStack.pop());
        }
    }
}
```

# 8. æ–æ³¢é‚£å¥‘æ•°åˆ—

## æè¿°

å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ n ï¼Œæ±‚æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•°åˆ—çš„ç¬¬ n é¡¹ï¼ˆå³ F(N)ï¼‰ã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰å¦‚ä¸‹ï¼š

F(0) = 0,   F(1) = 1
F(N) = F(N - 1) + F(N - 2), å…¶ä¸­ N > 1.

æ–æ³¢é‚£å¥‘æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œä¹‹åçš„æ–æ³¢é‚£å¥‘æ•°å°±æ˜¯ç”±ä¹‹å‰çš„ä¸¤æ•°ç›¸åŠ è€Œå¾—å‡ºã€‚

ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šn = 2
è¾“å‡ºï¼š1

ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šn = 5
è¾“å‡ºï¼š5

æç¤ºï¼š

0 <= n <= 100

## æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

æ€è·¯ï¼šæ–æ³¢é‚£å¥‘æ•°çš„è¾¹ç•Œæ¡ä»¶æ˜¯ F(0)=0å’Œ F(1)=1ã€‚å½“ n>1æ—¶ï¼Œæ¯ä¸€é¡¹çš„å’Œéƒ½ç­‰äºå‰ä¸¤é¡¹çš„å’Œï¼Œå› æ­¤æœ‰å¦‚ä¸‹é€’æ¨å…³ç³»ï¼š

F(n)=F(nâˆ’1)+F(nâˆ’2)

ç”±äºæ–æ³¢é‚£å¥‘æ•°å­˜åœ¨é€’æ¨å…³ç³»ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£ã€‚åŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å³ä¸ºä¸Šè¿°é€’æ¨å…³ç³»ï¼Œè¾¹ç•Œæ¡ä»¶ä¸ºF(0)å’ŒF(1)ã€‚

æ ¹æ®çŠ¶æ€è½¬ç§»çš„æ–¹ç¨‹å’Œè¾¹ç•Œæ¡ä»¶ï¼Œå¯ä»¥å¾—åˆ°æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯O(n)çš„å®ç°ã€‚ç”±äºF(n)åªå’ŒF(n-1)ä¸F(n-2)æœ‰å…³ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ã€æ»šåŠ¨æ•°ç»„æ€æƒ³ã€‘æŠŠç©ºé—´å¤æ‚åº¦ä¼˜åŒ–æˆO(1)ã€‚ä¸‹é¢çš„ä»£ç ä¸­ç»™å‡ºçš„å°±æ˜¯è¿™ç§å®ç°ã€‚![fig1](D:\Tyora\AssociatedPicturesInTheArticles\å‰‘æŒ‡Offer-1\10_I_fig1.gif)





## æ–¹æ³•äºŒï¼šçŸ©é˜µå¿«é€Ÿå¹‚