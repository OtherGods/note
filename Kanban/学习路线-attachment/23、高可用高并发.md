[Kafka、RocketMQ、RabbitMQ 学习资源推荐（书籍+视频+文章/专栏）](https://articles.zsxq.com/id_i16imeqka5ip.html)：

1. Kafka：
    
    1. 视频：
        
        1. 尚硅谷 Kaka 教程 - 2022： [https://www.bilibili.com/video/BV1vr4y1677k/](https://www.bilibili.com/video/BV1vr4y1677k) 。  
            这份教程是目前比较新也是比较全面的视频教程，基于 Kafka3.x 版本，Kafka-Kraft 模式也有介绍到。
            
    2. 网站/书籍：
        
        1. 官方文档：[https://kafka.apache.org/documentation/](https://kafka.apache.org/documentation)
            
        2. 《深入理解 Kafka：核心设计与实践原理》：朱忠华老师的，相比于国外的《 Kafka 权威指南》这本书来说，内容更新，理论知识更全面，更适合入门。
            
2. RocketMQ：
    
    1. 视频：
        
        1. 千锋教育 RockeMQ 视频教程 - 2022：[https://www.bilibili.com/video/BV1Ld4y1K7Fh](https://www.bilibili.com/video/BV1Ld4y1K7Fh)
            
        2. 尚硅谷 RockeMQ 视频教程 - 2021： [https://www.bilibili.com/video/BV1cf4y157sz](https://www.bilibili.com/video/BV1cf4y157sz)
            
    2. 网站/文章：
        
        1. 官方文档：[https://rocketmq.apache.org/zh/docs/](https://rocketmq.apache.org/zh/docs) 。
            
3. RabbitMQ：
    
    1. 视频：
        
        1. [尚硅谷RabbitMQ教程丨快速掌握MQ消息中间件_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1cb4y1o7zz/)
            
    2. 网站/书籍：
        
        1. 以官方文档：[Documentation: Table of Contents — RabbitMQ](https://www.rabbitmq.com/documentation.html) 为准，尽量尝试阅读官方文档。
            
        2. 理论部分的知识可以看看朱忠华老师的《RabbitMQ实战指南》
            

JavaGuide：

1. [Java学习&面试指南](https://javaguide.cn/home.html)
    
2. [《Java面试指北》](https://www.yuque.com/snailclimb/mf2z3k)
    

## 高并发

### 消息队列

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/20230710221554.png)


消息队列在分布式系统中主要是为了解耦和削峰。

常用的消息队列如下：

1. [**RocketMQ**](https://link.zhihu.com/?target=https%3A//github.com/apache/rocketmq) ：阿里巴巴开源的一款高性能、高吞吐量的分布式消息中间件。
    
2. [**Kafaka**](https://link.zhihu.com/?target=https%3A//github.com/apache/kafka): Kafka 是一种分布式的，基于发布 / 订阅的消息系统。
    
3. [**RabbitMQ**](https://link.zhihu.com/?target=https%3A//github.com/rabbitmq) :由 erlang 开发的基于 AMQP（Advanced Message Queue 高级消息队列协议）协议实现的消息队列。
    

### 读写分离&分库分表

读写分离主要是为了将数据库的读和写操作分不到不同的数据库节点上。主服务器负责写，从服务器负责读。另外，一主一从或者一主多从都可以。

读写分离可以大幅提高读性能，小幅提高写的性能。因此，读写分离更适合单机并发读请求比较多的场景。

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/20230710221604.png)


分库分表是为了解决由于库、表数据量过大，而导致数据库性能持续下降的问题。

常见的分库分表工具有：sharding-jdbc（当当）、TSharding（蘑菇街）、MyCAT（基于 Cobar）、Cobar（阿里巴巴）...。 推荐使用 sharding-jdbc。 因为，sharding-jdbc 是一款轻量级 Java 框架，以 jar 包形式提供服务，不要我们做额外的运维工作，并且兼容性也很好。

![image.png](https://raw.githubusercontent.com/OtherGods/MaterialImage/main/img/20230710221620.png)


### 负载均衡[读写分离&分库分表](https://link.zhihu.com/?target=https%3A//javaguide.cn/high-performance/read-and-write-separation-and-library-subtable.html)负载均衡

负载均衡系统通常用于将任务比如用户请求处理分配到多个服务器处理以提高网站、应用或者数据库的性能和可靠性。

常见的负载均衡系统包括 3 种：

1. **DNS 负载均衡** ：一般用来实现地理级别的均衡。
    
2. **硬件负载均衡** ： 通过单独的硬件设备比如 F5 来实现负载均衡功能（硬件的价格一般很贵）。
    
3. **软件负载均衡** ：通过负载均衡软件比如 Nginx 来实现负载均衡功能。
    

## 高可用

高可用描述的是一个系统在大部分时间都是可用的，可以为我们提供服务的。高可用代表系统即使在发生硬件故障或者系统升级的时候，服务仍然是可用的 。

相关阅读： **《**[**如何设计一个高可用系统？要考虑哪些地方？**](https://link.zhihu.com/?target=https%3A//snailclimb.gitee.io/javaguide/%23/docs/system-design/high-availability/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E9%AB%98%E5%8F%AF%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%A6%81%E8%80%83%E8%99%91%E5%93%AA%E4%BA%9B%E5%9C%B0%E6%96%B9)**》** 。

### 限流&降级&熔断

限流是从用户访问压力的角度来考虑如何应对系统故障。限流为了对服务端的接口接受请求的频率进行限制，防止服务挂掉。比如某一接口的请求限制为 100 个每秒, 对超过限制的请求放弃处理或者放到队列中等待处理。限流可以有效应对突发请求过多。相关阅读：[限流算法有哪些？](https://link.zhihu.com/?target=https%3A//snailclimb.gitee.io/javaguide/%23/docs/system-design/high-availability/limit-request)

降级是从系统功能优先级的角度考虑如何应对系统故障。服务降级指的是当服务器压力剧增的情况下，根据当前业务情况及流量对一些服务和页面有策略的降级，以此释放服务器资源以保证核心任务的正常运行。

熔断和降级是两个比较容易混淆的概念，两者的含义并不相同。

降级的目的在于应对系统自身的故障，而熔断的目的在于应对当前系统依赖的外部系统或者第三方系统的故障。

[Hystrix](https://link.zhihu.com/?target=https%3A//github.com/Netflix/Hystrix) 和 [Sentinel](https://link.zhihu.com/?target=https%3A//github.com/alibaba/Sentinel) 都能实现限流、降级、熔断。

Hystrix 是 Netflix 开源的熔断降级组件，Sentinel 是阿里中间件团队开源的一款不光具有熔断降级功能，同时还支持系统负载保护的组件。

两者都是主要做熔断降级 ，那么两者到底有啥异同呢？该如何选择呢？

[Sentinel 的 wiki 中已经详细描述了其与 Hystrix 的区别](https://link.zhihu.com/?target=https%3A//github.com/alibaba/Sentinel/wiki/Sentinel-%E4%B8%8E-Hystrix-%E7%9A%84%E5%AF%B9%E6%AF%94)，你可以看看。

### 排队[限流](https://link.zhihu.com/?target=https%3A//javaguide.cn/high-availability/limit-request.html)排队

另类的一种限流，类比于现实世界的排队。玩过英雄联盟的小伙伴应该有体会，每次一有活动，就要经历一波排队才能进入游戏。

### 集群

相同的服务部署多份，避免单点故障。

### 超时和重试机制

**一旦用户的请求超过某个时间得不到响应就结束此次请求并抛出异常。** 如果不进行超时设置可能会导致请求响应速度慢，甚至导致请求堆积进而让系统无法在处理请求。

另外，重试的次数一般设为 3 次，再多次的重试没有好处，反而会加重服务器压力（部分场景使用失败重试机制会不太适合）。